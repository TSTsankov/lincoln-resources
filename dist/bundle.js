!function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=2)}([function(e,n){e.exports='<div class="card">\r\n    <div class="card-header main p-0">\r\n        <p class="mb-0">\r\n            Add new {{message}}\r\n            <span class="float-right fa fa-close" style="cursor:pointer" ng-click="dismissModal()"></span>\r\n        </p>\r\n\r\n    </div>\r\n    <div class="card-body text-center">\r\n        <h5 ng-if="sectionName" class="mb-3">Block: {{sectionName}}</h5>\r\n        <p>Enter a name for your new {{message}}.</p>\r\n        <form name="nameForm" ng-submit="closeModal(nameForm)">\r\n\r\n            <label for="name">Name:</label>\r\n            <input type="text" id="name" name="name" ng-model="newElement.name" ng-minlength="3" ng-required="true" ng-if="newElement.hasOwnProperty(\'name\')">\r\n            <input type="text" id="name" name="name" ng-model="newElement.subtitle" ng-minlength="3" ng-required="true" ng-if="newElement.hasOwnProperty(\'subtitle\')">\r\n            <p ng-show="!nameForm.$pristine && nameForm.name.$error.minlength">Minimum 3 characters</p>\r\n        </form>\r\n    </div>\r\n    <div class="card-footer text-center">\r\n        <button class="btn btn-warning mx-4 w-25" ng-click="dismissModal()"> Never Mind </button>\r\n        <button class="btn btn-success mx-4 w-25" ng-click="closeModal(nameForm)"> Create</button>\r\n    </div>\r\n</div>'},function(e,n){e.exports='<div class="pt-4 mt-5">\r\n    <h6>On this page: </h6>\r\n    <p class="small">(Click on title to scroll to)</p>\r\n    <ul class="my-4 summary-list">\r\n        <li class="my-3" ng-repeat="title in titles" ng-click="scrollTo(title,$event)">\r\n            {{title}}\r\n        </li>\r\n        <li class="btn btn-sm text-white btn-success p-1 pr-3 mt-4" ng-click="sendAddSectionMessage()" ng-if="adminMode"><span class="fa fa-plus-circle float-left mr-3 text-white small"></span>Add new Section</li>\r\n    </ul>\r\n</div>'},function(e,n,t){"use strict";Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),t=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<t;){var a=n[i];if(e.call(r,a,i,n))return i;i++}return-1}});var r=angular.module("MyApp",["ngRoute","ngResource","ngAnimate","duScroll","ui.bootstrap"]).run(["$anchorScroll",function(e){e.yOffset=90}]);r.config(["$routeProvider","$locationProvider","$compileProvider",function(e,n,t){t.imgSrcSanitizationWhitelist(),t.aHrefSanitizationWhitelist();t.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|blob):|data:image\//),t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|file|blob):|data:image\//),e.when("/content/:group/blocks/:blockname/chapter/:chaptername",{templateUrl:"templates/newContent.html",controller:"MainContentCtrl",resolve:{dataBlock:["navigate","dataFetcher","$route",function(e,n,t){if(!e.getData()||e.getGroup()!=t.current.params.group)return n.get(t.current.params.group).$promise.then(function(n){return e.setData(n,t.current.params.group),n})}]}}).when("/content/:group/blocks/:blockname",{template:"",controller:"ContentRedirecter",resolve:{dataBlock:["navigate","dataFetcher","$route",function(e,n,t){return n.get(t.current.params.group).$promise.then(function(n){return e.setData(n,t.current.params.group),n})}]}}).when("/content/:group",{template:"",controller:"ContentRedirecter",resolve:{dataBlock:["navigate","dataFetcher","$route",function(e,n,t){return n.get(t.current.params.group).$promise.then(function(n){return e.setData(n,t.current.params.group),n})}]}}).when("/admin",{templateUrl:"templates/adminHome.html",controller:"AdminController",resolve:{dataBlock:function(){}}}).when("/admin/:group",{templateUrl:"templates/adminEditor.html",controller:"AdminController",resolve:{dataBlock:["navigate","dataFetcher","$route",function(e,n,t){return n.get(t.current.params.group).$promise.then(function(n){return e.setData(n,t.current.params.group),n})}]}}).when("/admini/:group",{templateUrl:"templates/admin/adminHome.html",controller:"AdminInterfaceController",resolve:{dataBlock:["navigate","dataFetcher","$route",function(e,n,t){return n.get(t.current.params.group).$promise.then(function(e){return e})}]}}).when("/:group/search",{templateUrl:"templates/searchResults.html",controller:"searchController",resolve:{query:["$location",function(e){return e.search()}],dataBlock:["navigate","dataFetcher","$route",function(e,n,t){return e.getData()&&e.getGroup()==t.current.params.group?e.getData():n.get(t.current.params.group).$promise.then(function(n){return e.setData(n,t.current.params.group),n})}]}}).when("/404",{templateUrl:"templates/404.html"}).when("/",{templateUrl:"templates/mainmenu.html",controller:"MainMenuController"}).when("/test",{templateUrl:"templates/test.html",controller:"TestController",resolve:{dataBlock:function(){}}}).otherwise({}),n.html5Mode(!0)}]),t(3)(r),t(5)(r),t(8)(r),t(9)(r),t(10)(r),t(11)(r),t(12)(r),t(13)(r),t(14)(r),t(15)(r),t(16)(r),t(17)(r),t(19)(r),t(20)(r),t(21)(r),t(22)(r),t(23)(r),t(24)(r),t(25)(r),t(26)(r),t(27)(r),t(28)(r),t(29)(r),t(30)(r),t(31)(r),t(33)(r),t(35)(r),t(36)(r),t(39)(r),t(41)(r),t(43)(r),t(45)(r),t(47)(r),t(49)(r),t(51)(r),t(53)(r),t(55)(r),t(57)(r),t(59)(r),t(61)(r),t(62)(r),t(64)(r),t(66)(r),t(68)(r),t(70)(r),t(72)(r),t(74)(r),t(76)(r),t(78)(r),t(80)(r),t(82)(r),t(84)(r),t(85)(r),t(87)(r),t(88)(r),t(89)(r),t(91)(r),t(93)(r),t(95)(r),t(97)(r),t(99)(r),t(101)(r),t(103)(r),t(105)(r),t(107)(r),t(109)(r),t(111)(r)},function(e,n,t){"use strict";e.exports=function(e){e.directive("textParagraph",["$timeout",function(e){return{restrict:"E",scope:{component:"="},template:t(4),link:function(n,t){e(function(){if(n.component.hasOwnProperty("links")){for(var e=n.component.text,r=0;r<n.component.links.length;r++)if(!(n.component.links[r].portion.length<3)){var i=new RegExp(n.component.links[r].portion,"gi");e=e.replace(i,'<span class="fa fa-globe"></span><a class="website-link" target="_blank" href="'+n.component.links[r].href+'">'+n.component.links[r].portion+"</a>")}$(t).find("p").html(e)}},0)}}}])}},function(e,n){e.exports='<h5 ng-show="component.subtitle">{{component.subtitle}}</h5>\r\n<p class="card-text mb-3 " ng-class="{\'obvious-text\': component.embolden}">\r\n    {{component.text}}\r\n</p>\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.controller("AdminInterfaceController",["$scope","dataBlock","$timeout","$uibModal","$filter","fileService","dataFetcher","$routeParams","$window",function(e,n,r,i,a,o,l,s,c){function d(e){f(e)}function p(n){switch(n.message){case"Block":e.data.splice(n.index,0,n.object);break;case"Chapter":e.data[n.parentIndex].chapters.splice(n.index,0,n.object);break;case"Section":n.chapter.sections.splice(n.index,0,n.object),e.selChapter===n.chapter&&e.$broadcast("dataWasLoaded",e.selChapter.sections);break;case"Component":n.section.components.splice(n.index,0,n.object)}}function m(n){if("Block"!==n.message)if("Chapter"!==n.message){if("Section"===n.message||"Component"===n.message){n.chapter.pop()}}else{e.data[n.index].chapters.pop()}else{e.data.pop()}}function u(n){switch(n.type){case"Chapter":n.element.name=n.prev.name;break;case"Component":case"Section":"link-pdf"===n.context[n.index].type&&n.context[n.index].links.forEach(function(e){e.link.startsWith("blob")&&o.remove(e)}),n.context[n.index]=angular.copy(n.prev),e.broadcast()}}function f(n,t){if("up"===n.direction)var i=-1;else var i=1;if(t){var a=n.array[n.index+i].subtitle,o=a.replace(/\s/g,"").toLowerCase();r(function(){e.$broadcast("ifsPrepareScroll",[o])},0)}var l=n.index;if(!n.hasOwnProperty("index")||void 0!==n.index){var s=n.array,c=s[l];s[l]=s[l+i],s[l+i]=c}}var h=function(){function n(n){return{blockname:e.data[n].name,name:"New Chapter "+ ++o,sections:[]}}function t(){return{name:"New Block "+ ++l,chapters:[{blockname:"New Block "+l,name:"Introduction",sections:[]}]}}function r(){return{subtitle:"New Section "+ ++a,space_after:!1,components:[]}}function i(){return{type:"text-paragraph"}}var a=0,o=0,l=0;return{makeChapter:n,makeBlock:t,makeSection:r,makeComponent:i}}();e.resolveUndo=function(n){for(var t=0;t<=n;t++)e.undoItems[t].callback.apply(this,e.undoItems[t].args);e.undoItems.splice(0,n+1)},e.data=n,e.group=s.group,e.undoMode=!1,e.undoItems=[],e.registerUndo=function(n,t){var r={};if("Edit"===n){var i=t.type;r.event="edit",r.title=[["Block",e.selBlock.name],["Chapter",e.selChapter.name]],r.summary=i+" "+("Component"==i?a("nicename")(t.title):t.title)+" has been edited",r.callback=u,r.args=[{element:t.element,context:t.context,index:t.index,prev:t.master,type:i}]}e.undoItems.unshift(r)},e.selBlock=n[0],e.selBlock&&e.selBlock.hasOwnProperty("chapters")&&(e.selChapter=n[0].chapters[0]),e.broadcast=function(){e.$broadcast("dataWasLoaded",e.selChapter.sections)},e.$watchCollection(function(){return e.selChapter.sections},function(n,t){e.broadcast()});var g=angular.element(document.getElementById("mainContent2"));e.addBlock=function(){var n=h.makeBlock();if(i){i.open({template:t(0),controller:"ArrayAddModalCtrl",animation:!1,windowClass:"my-modal modal-add",backdrop:"static",resolve:{item:function(){return{newSection:n,message:"Block"}}}}).result.then(function(t){var r={};r.event="add",r.title=[["Block",n.name]],r.summary="Block has been added.",r.callback=m,r.args=[{message:"Block"}],e.undoItems.unshift(r),e.data.push(n)},function(e){})}},e.addChapter=function(n){var r=h.makeChapter(n),a=e.data[n].name;if(i){i.open({template:t(0),controller:"ArrayAddModalCtrl",animation:!1,windowClass:"my-modal modal-add",backdrop:"static",resolve:{item:function(){return{newChapter:r,message:"Chapter",sectionName:a}}}}).result.then(function(t){var i={};i.event="add",i.title=[["Block",a],["Chapter",r.name]],i.summary="Chapter "+r.name+" has been added in block "+a,i.callback=m,i.args=[{message:"Chapter",index:n}],e.undoItems.unshift(i),e.data[n].chapters.push(r)},function(e){})}},e.addSection=function(){var n=h.makeSection();if(i){i.open({template:t(0),controller:"ArrayAddModalCtrl",animation:!1,windowClass:"my-modal modal-add",backdrop:"static",resolve:{item:function(){return{newSection:n,message:"Section"}}}}).result.then(function(t){var i={};i.event="add",i.title=[["Block",e.selBlock.name],["Chapter",e.selChapter.name],["Section",n.subtitle]],i.summary="Section "+n.subtitle+" has been added",i.callback=m,i.args=[{message:"Section",chapter:e.selChapter.sections}],e.undoItems.unshift(i),e.selChapter.sections.push(n),r(function(){e.$broadcast("ifsPrepareScroll",[a("nospaces")(n.subtitle).toLowerCase()])},100)},function(e){})}},e.addComponent=function(n){var r=h.makeComponent();if(i){i.open({template:t(6),controller:"ArrayAddComponentModalCtrl",animation:!1,windowClass:"my-modal modal-add",backdrop:"static",resolve:{item:function(){return{newComponent:r,message:"Component"}}}}).result.then(function(t){var i={};i.event="add",i.title=[["Block",e.selBlock.name],["Chapter",e.selChapter.name],["Section",n.subtitle]],i.summary="Component of type  "+a("nicename")(r.type)+" has been added",i.callback=m,i.args=[{message:"Component",chapter:n.components}],e.undoItems.unshift(i),n.components.push(r)},function(e){})}},e.$on("move",function(n,t){n.preventDefault();var r=void 0;switch(t.message){case"Chapter":r=[["Block",e.data[t.parentIndex].name],["Chapter",e.data[t.parentIndex].chapters[t.index].name]];break;case"Block":r=[["Block",e.data[t.index].name]];break;case"Section":r=[["Block",e.selBlock.name],["Chapter",e.selChapter.name],["Section",e.selChapter.sections[t.index].subtitle]];break;case"Component":r=[["Block",e.selBlock.name],["Chapter",e.selChapter.name],["Section",e.selChapter.sections[t.parentIndex].subtitle],["Type",e.selChapter.sections[t.parentIndex].components[t.index].type]];break;case"Link":return void f(t)}var i=t.message+" has been moved "+t.direction+"wards.",a=t;"up"===t.direction?(a.direction="down",a.index=t.index-1):(a.direction="up",a.index=t.index+1);var o={title:r,summary:i,event:"move",callback:d,args:[a]};f(t,"Section"===t.message),e.undoItems.unshift(o)}),e.$on("ChangeChapter",function(t,r,i){if(t.preventDefault(),t.stopPropagation(),void 0===r&&void 0===i)return e.selChapter=void 0,void e.$broadcast("dataWasLoaded");e.selBlock=n[r],e.selChapter=n[r].chapters[i],e.index=i,e.$broadcast("dataWasLoaded",e.selChapter.sections),g[0].scrollTop=0}),e.$on("ifsPrepareScroll",function(e,n){e.preventDefault();var t=n[0],r=angular.element(document.getElementById(t));g.scrollToElement(r,50,120)}),e.$on("deleteFromArray",function(n,r){n.preventDefault(),n.stopPropagation();var a={};switch(r.message){case"Block":a.block=e.data[r.index].name;break;case"Chapter":a.block=e.data[r.parentIndex].name,a.chapter=e.data[r.parentIndex].chapters[r.index].name;break;case"Section":a.block=e.selBlock.name,a.chapter=e.selChapter.name,a.section=e.selChapter.sections[r.index].subtitle;break;case"Component":a.block=e.selBlock.name,a.chapter=e.selChapter.name,a.section=e.selChapter.sections[r.parentIndex].subtitle,a.type=e.selChapter.sections[r.parentIndex].components[r.index].type}if(i){i.open({template:t(7),controller:"ArrayDeleteModalCtrl",animation:!1,windowClass:"my-modal modal-delete",backdrop:"static",resolve:{item:a}}).result.then(function(n){var t=!1,i={};if(i.event="delete",i.summary=r.message+" has been deleted.","Block"===r.message)e.selBlock===e.data[r.index]&&(t=!0),r.object=e.data[r.index],i.title=[["Block",r.object.name]],e.data.splice(r.index,1);else if("Chapter"===r.message){if(e.data[r.parentIndex].chapters.length<2)return void alert("You must have at least 1 chapter");e.selChapter===e.data[r.parentIndex].chapters[r.index]&&(t=!0),r.object=e.data[r.parentIndex].chapters[r.index],i.title=[["Block",e.data[r.parentIndex].name],["Chapter",r.object.name]],e.data[r.parentIndex].chapters.splice(r.index,1)}else"Section"===r.message?(r.object=e.selChapter.sections[r.index],r.chapter=e.selChapter,i.title=[["Block",e.selBlock.name],["Chapter",e.selChapter.name],["Section",e.selChapter.sections[r.index].subtitle]],e.selChapter.sections.splice(r.index,1),e.$broadcast("dataWasLoaded",e.selChapter.sections)):"Component"===r.message&&(r.object=e.selChapter.sections[r.parentIndex].components[r.index],r.section=e.selChapter.sections[r.parentIndex],i.title=[["Block",e.selBlock.name],["Chapter",e.selChapter.name],["Section",e.selChapter.sections[r.parentIndex].subtitle],["Type",r.object.type]],e.selChapter.sections[r.parentIndex].components.splice(r.index,1));t&&e.$emit("ChangeChapter"),i.callback=p,i.args=[r],e.undoItems.unshift(i)},function(e){})}}),e.$on("addSection",function(n){e.addSection()}),e.undoToggle=function(){e.undoMode=!e.undoMode},e.saveChanges=function(){o.post().then(function(n){l.post(e.group,e.data).$promise.then(function(e){c.alert("Data has been saved successfully")}).catch(function(e){})}).catch(function(e){})}}])}},function(e,n){e.exports='<div class="card">\r\n    <div class="card-header main p-0">\r\n        <p class="mb-0">\r\n            Add new {{item.message}}\r\n            <span class="float-right fa fa-close" style="cursor:pointer" ng-click="dismissModal()"></span>\r\n        </p>\r\n\r\n    </div>\r\n    <div class="card-body text-center">\r\n\r\n        <form name="typeForm" novalidate>\r\n            <div class="form-group text-center types">\r\n                <label for="componentType">Component Type: </label>\r\n                <select id="componentType" class="custom-select" ng-model="item.newComponent.type" ng-required="true">\r\n                    <option ng-repeat="type in types" ng-value="type.type">\r\n                        <div class="flex-item">\r\n                            <span class="{{type.icon}}" style="width: 25px"></span>\r\n                            <span class="ml-2 small" style="width: 75px">{{type.display}}</span>\r\n                        </div>\r\n                    </option>\r\n                </select>\r\n            </div>\r\n            <p>Current type: {{item.newComponent.type}}</p>\r\n        </form>\r\n\r\n        </div>\r\n    </div>\r\n    <div class="card-footer text-center">\r\n        <button class="btn btn-warning mx-4 w-25" ng-click="dismissModal()"> Never Mind </button>\r\n        <button class="btn btn-success mx-4 w-25" ng-click="closeModal(nameForm)"> Create</button>\r\n    </div>\r\n</div>\r\n'},function(e,n){e.exports='<div class="card">\r\n    <div class="card-header main p-0">\r\n        <p class="mb-0">\r\n            Delete\r\n            <span class="float-right fa fa-close" style="cursor:pointer" ng-click="dismissModal()"></span>\r\n        </p>\r\n\r\n    </div>\r\n    <div class="card-body text-center">\r\n        <p>Are you sure you want to delete ? </p>\r\n        <p><span class="font-weight-bold" ng-show="item.block">Block: </span> {{item.block}}</p>\r\n        <p><span class="font-weight-bold" ng-show="item.chapter">Chapter: </span> {{item.chapter}}</p>\r\n        <p><span class="font-weight-bold" ng-show="item.section">Section: </span> {{item.section}}</p>\r\n        <p><span class="font-weight-bold" ng-show="item.type">Component: </span> {{item.type}}</p>\r\n\r\n    </div>\r\n    <div class="card-footer text-center">\r\n            <button class="btn btn-success mx-4 w-25" ng-click="dismissModal()"> No </button>\r\n            <button class="btn btn-danger mx-4 w-25" ng-click="closeModal()"> Yes</button>\r\n    </div>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.controller("AdminController",["$scope","dataBlock","$location","navigate","$timeout","dataFetcher",function(e,n,t,r,i,a){if(e.selected="",e.step=0,e.chapter=null,n){var o=n;e.data=angular.copy(o),e.group=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}(r.getGroup())}e.saveChanges=function(){a.post(e.group,e.data).$promise.then(function(e){}).catch(function(e){})},e.selectGroup=function(e){t.path("/admini/"+e)},e.editBlock=function(n){e.selected!==n?e.selected=n:e.selected=null},e.addBlock=function(){e.data.push({name:"Edit this block",introcontent:{},chapters:[]})},e.editChapter=function(n,t){e.chapter=-1===n?e.data[t].introcontent:e.data[t].chapters[n],e.step=1,e.$broadcast("prepareFields")},e.addChapter=function(n){e.data[n].chapters.push({blockname:e.data[n].name,name:"Edit this chapter",sections:[]})},e.deleteChapter=function(n,t,r){r.stopPropagation(),r.preventDefault(),e.data[t].chapters.splice(n,1)},e.goBack=function(){e.chapter=null,e.data=angular.copy(o),e.step=0,e.$broadcast("deleteSelectors"),i(function(){l("adminEditor")},50)},e.submit=function(){o=e.data,e.data=angular.copy(o),e.goBack()};var l=function(e){var n=angular.element(document.getElementById(e));angular.element(document.getElementById("mainContent")).scrollToElement(n,0,50)}}])}},function(e,n,t){"use strict";e.exports=function(e){e.controller("ArrayDeleteModalCtrl",["$scope","$uibModalInstance","item",function(e,n,t){e.item=t,e.closeModal=function(){n.close({val:!0})},e.dismissModal=function(){n.dismiss("Modal dismissed")}}])}},function(e,n,t){"use strict";e.exports=function(e){e.controller("ArrayAddModalCtrl",["$scope","$uibModalInstance","item",function(e,n,t){"Block"===t.message?e.newElement=t.newSection:"Chapter"===t.message?(e.newElement=t.newChapter,e.sectionName=t.sectionName):"Section"===t.message&&(e.newElement=t.newSection),e.message=t.message,e.closeModal=function(e){e.$valid&&n.close({val:!0})},e.dismissModal=function(){n.dismiss("Modal dismissed")}}])}},function(e,n,t){"use strict";e.exports=function(e){e.controller("ArrayEditModalCtrl",["$scope","$uibModalInstance","item","links","authors","fileService","$timeout",function(e,n,t,r,i,a,o){var l;o(function(){l=angular.element(document.getElementsByClassName("component-edit-form"))},0),e.item=t,e.types=[{display:"Paragraph",type:"text-paragraph",icon:" fa fa-align-justify"},{display:"List",type:"list-text",icon:"fa fa-list"},{display:"Link(PDF)",type:"link-pdf",icon:"fa fa-file-pdf-o"},{display:"Link(Email)",type:"link-email",icon:"fa fa-envelope-o"},{display:"Reference",type:"link-reference",icon:"fa fa-address-book-o"},{display:"Quiz",type:"quiz",icon:"fa fa-question-circle-o"},{display:"Video",type:"video-single",icon:"fa fa-play"},{display:"Video(Multiple)",type:"video-carousel",icon:"fa fa-file-video-o"},{display:"Link(Web)",type:"link-website",icon:"fa fa-globe"},{display:"Link(Telephone)",type:"link-telephone",icon:"fa fa-phone"},{display:"Thought Bubble",type:"thought-bubble",icon:"fa fa-comment"},{display:"Myth",type:"text-mythfact",icon:"fa fa-lightbulb-o"},{display:"Alert",type:"text-alert",icon:"fa fa-exclamation"},{display:"Image",type:"image-single",icon:"fa fa-image"},{display:"Quote",type:"text-quote",icon:"fa fa-quote-right"}],e.closeModal=function(r){if(a.log(),r.$valid)if("text-paragraph"===t.element.type)n.close({reboot:!0,element:angular.copy(t.element)});else if("video-single"===t.element.type||"video-carousel"===t.element.type)n.close({reboot:!0,element:t.element});else if("list-text"===t.element.type)n.close({reboot:!0,element:angular.copy(t.element)});else if("link-reference"===t.element.type){var l="";t.element.hasOwnProperty("authors")&&(l=t.element.authors.reduce(function(e,n){return e.concat(n.name+"\n")},"")),l!==i.authors&&(t.element.authors=[],i.authors.split("\n").forEach(function(e,n){t.element.authors.push({name:e})}),i.authors=""),n.close({reboot:!1})}else"link-email"===t.element.type?(t.element.links=t.element.links.map(function(e){return e.link="mailto:"+e.text,e}),n.close({reboot:!1})):"link-pdf"===t.element.type||"image-single"===t.element.type?(a.createUrls(),n.close({reboot:!1})):n.close({reboot:!1});else e.$broadcast("invalid"),o(function(){e.$emit("scrollTo",{message:"invalid"})},100)},e.dismissModal=function(e){n.dismiss("Modal dismissed")},e.log=function(){},e.$on("move",function(e,n){if(e.preventDefault(),e.stopPropagation(),"up"===n.direction)var t=-1;else var t=1;var r=n.index;if(!n.hasOwnProperty("index")||void 0!==n.index){var i=n.array,a=i[r];i[r]=i[r+t],i[r+t]=a}}),e.$on("deleteFromArray",function(e,n){n.array.splice(n.index,1)}),e.$on("scrollTo",function(e,n){if(e.preventDefault(),e.stopPropagation(),"invalid"===n.message){var t=l.find("input.ng-invalid,textarea.ng-invalid").first();l.scrollTo(t,50,120)}})}])}},function(e,n,t){"use strict";e.exports=function(e){e.controller("ArrayAddComponentModalCtrl",["$scope","$uibModalInstance","item",function(e,n,t){e.item=t,e.types=[{display:"Paragraph",type:"text-paragraph",icon:" fa fa-align-justify"},{display:"List",type:"list-text",icon:"fa fa-list"},{display:"Documents",type:"link-pdf",icon:"fa fa-file-pdf-o"},{display:"E-mail",type:"link-email",icon:"fa fa-envelope-o"},{display:"Reference",type:"link-reference",icon:"fa fa-address-book-o"},{display:"Quiz",type:"quiz",icon:"fa fa-question-circle-o"},{display:"Video",type:"video-single",icon:"fa fa-play"},{display:"Video Carousel",type:"video-carousel",icon:"fa fa-file-video-o"},{display:"Website Links",type:"link-website",icon:"fa fa-globe"},{display:"Contact Number",type:"link-telephone",icon:"fa fa-phone"},{display:"Thought Bubble",type:"thought-bubble",icon:"fa fa-comment"},{display:"Myth",type:"text-mythfact",icon:"fa fa-lightbulb-o"},{display:"Alert",type:"text-alert",icon:"fa fa-exclamation"},{display:"Image",type:"image-single",icon:"fa fa-image"},{display:"Quote",type:"text-quote",icon:"fa fa-quote-right"}],e.closeModal=function(){n.close({val:!0})},e.dismissModal=function(){n.dismiss("Modal dismissed")}}])}},function(e,n,t){"use strict";e.exports=function(e){e.directive("collapsibleCard",[function(){return{restrict:"A",link:function(e,n,t,r){var i=$(n).find(".card-header"),a=$(i).find("span"),o=$(n).find(".card-body");i.click(function(e){o.toggleClass("collapse"),o.hasClass("collapse")?(a.removeClass("fa-minus"),a.addClass("fa-arrow-down")):(n.siblings().find(".card-body").each(function(e,n){var t=$(n);if(!t.hasClass("collapse")){t.addClass("collapse");var r=t.parent().find(".card-header").find("span");r.removeClass("fa-minus"),r.addClass("fa-arrow-down")}}),a.removeClass("fa-arrow-down"),a.addClass("fa-minus"))}),e.$on("invalid",function(e,n){$(o).find("input.ng-invalid,textarea.ng-invalid").length>0&&o.hasClass("collapse")&&(o.toggleClass("collapse"),a.removeClass("fa-arrow-down"),a.addClass("fa-minus"))}),i.click()}}}])}},function(e,n,t){"use strict";e.exports=function(e){e.controller("ContentRedirecter",["$scope","dataBlock","$location","navigate","$routeParams",function(e,n,t,r,i){var a=t.path();if(a.includes("/blocks/")){var o=n.find(function(e){return e.name===i.blockname});t.path(a+"/chapter/"+o.chapters[0].name).replace()}else t.path(a+"/blocks/"+n[0].name+"/chapter/"+n[0].chapters[0].name).replace()}])}},function(e,n,t){"use strict";e.exports=function(e){e.controller("TestController",["dataBlock","$scope","fileService","$window",function(e,n,t,r){function i(){return new Promise(function(e,t){var r={},i=n.files.length,a=0,o=!0,l=!1,s=void 0;try{for(var c,d=n.files[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var p=c.value;!function(n){var t=new FileReader;t.onload=function(t){a++,r[n.name]={},r[n.name].type=n.type,r[n.name].content=t.target.result,a==i&&e(r)},t.readAsBinaryString(n)}(p)}}catch(e){l=!0,s=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw s}}})}n.results={},n.urls={},$("#fileSelect").on("click",function(e){$("#fileElem").click()}),n.$watchCollection("files",function(e,t){if(e){var i=!0,a=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;n.urls.hasOwnProperty(c.name)||(n.urls[c.name]=r.URL.createObjectURL(c))}}catch(e){a=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw o}}}}),n.$on("destroy",function(){var e=!0,t=!1,i=void 0;try{for(var a,o=Object.keys(n.urls)[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;r.URL.revokeObjectURL(n.urls[l])}}catch(e){t=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw i}}}),document.getElementById("fileElem").addEventListener("change",function(){var e=this.files;n.$apply(function(){n.files=e})},!1),n.getFiles=function(){n.results={images:t.get("images"),pdfs:t.get("pdfs")}},n.sendFiles=function(){i().then(function(e){t.post(e).$promise.then(function(e){},function(e){})})}}])}},function(e,n,t){"use strict";e.exports=function(e){e.controller("MainContentCtrl",["$scope","$routeParams","navigate","dataBlock","$location","$timeout",function(e,n,t,r,i,a){function o(e,n){var t=n[0],r=angular.element(document.getElementById(t));angular.element(document.getElementById("mainContent")).scrollToElement(r,50,120)}e.data={};var l=angular.element(document.getElementById("mainContent"));t.urlIsValid(n)||t.errorPage();var s=t.getDataBlock();e.$emit("$dataWasLoaded",s[0]),e.data=s[0],e.index=s[1],e.blockLength=t.getBlockLength(),i.hash()?a(function(){o(null,[i.hash()])},200):l.scrollTop(0,0),e.$on("ifsScrollTo",o)}])}},function(e,n,t){"use strict";e.exports=function(e){e.controller("MainMenuController",["$scope","$location",function(e,n){var r=new Image,i=new Image,a=new Image;r.src="/assets/css/images/StudentsOver.png",i.src="/assets/css/images/EducatorsOver.png",a.src="/assets/css/images/StaffOver.png",e.selectGroup=function(e){n.url("/content/"+e+"/")},$("#mainContent").scrollTop(0),e.videoComp={type:"video-single",subtitle:"The Successful Placement App Introduction",video:{type:"helix",src:"https://media.coventry.ac.uk/player?autostart=n&fullscreen=n&width=0&height=0&videoId=21122&quality=hi&captions=n&chapterId=0",thumb:"images/successful_placement.jpg"}},e.quoteComp={subtitle:"",type:"text-quote",text:"Student nurses value a welcoming workplace where staff and educators are happy to help and have a positive attitude to student presence on the wards",author:"Doyle et al ",year:"2017"},e.contactDetails={subtitle:"Contact Details",components:[{subtitle:"Telephone",type:"link-telephone",text:"+44 (0)24 7765 8029",space_after:!1},{subtitle:"E-mails",type:"link-email",links:[{tag:"Disability Team",text:"disabilityadvisor.ss@coventry.ac.uk",link:"mailto:disabilityadvisor.ss@coventry.ac.uk"},{tag:"Mental health Team",text:"counsell.ss@coventry.ac.uk",link:"mailto:counsell.ss@coventry.ac.uk"}],space_after:!1}],space_after:!1};bodymovin.loadAnimation({container:document.getElementById("bm"),loop:!0,renderer:"svg",autoplay:!0,animationData:t(18)});$(".carousel").carousel({autoplay:!0,interval:4500});angular.element(document.getElementById("mainContent")),angular.element(document.getElementsByClassName("home-container")),angular.element(document.getElementById("bm"))}])}},function(e,n,t){"use strict";e.exports={v:"4.11.0",fr:25,ip:0,op:31,w:2027,h:500,nm:"MainMIN",ddd:0,assets:[{id:"image_0",w:326,h:118,u:"images/",p:"img_0.png"},{id:"image_1",w:260,h:53,u:"images/",p:"img_1.png"},{id:"image_2",w:2e3,h:543,u:"images/",p:"img_2.png"},{id:"image_3",w:31,h:86,u:"images/",p:"img_3.png"},{id:"image_4",w:26,h:87,u:"images/",p:"img_4.png"},{id:"comp_10",layers:[{ddd:0,ind:1,ty:2,nm:"SUPPORT",refId:"image_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[4113.5,921.5,0],ix:2},a:{a:0,k:[163,59,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:2,ty:2,nm:"for Students on Placement",refId:"image_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:0,s:[4],e:[-2]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:15,s:[-2],e:[4]},{t:31}],ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},n:"0p667_1_0p333_0",t:0,s:[4198.5,1006.5,0],e:[4233,1003,0],to:[5.75,-.58333331346512,0],ti:[0,0,0]},{i:{x:.667,y:1},o:{x:.333,y:0},n:"0p667_1_0p333_0",t:15,s:[4233,1003,0],e:[4198.5,1006.5,0],to:[0,0,0],ti:[5.75,-.58333331346512,0]},{t:31}],ix:2},a:{a:0,k:[251.415,22.974,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:3,ty:2,nm:"main",refId:"image_2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[4040,1105,0],ix:2},a:{a:0,k:[1e3,271.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:4,ty:2,nm:"string R",refId:"image_3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:0,s:[5],e:[-30]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:15,s:[-30],e:[5]},{t:31}],ix:10},p:{a:0,k:[4199.237,943.442,0],ix:2},a:{a:0,k:[25.179,1.625,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:5,ty:2,nm:"string L",refId:"image_4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:0,s:[21],e:[-7]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:15,s:[-7],e:[21]},{t:31}],ix:10},p:{a:0,k:[3991.682,929.247,0],ix:2},a:{a:0,k:[7.507,6.933,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:150,st:0,bm:0}]}],layers:[{ddd:0,ind:1,ty:0,nm:"Small All",refId:"comp_10",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1029.5,2992,0],ix:2},a:{a:0,k:[4054,3784,0],ix:1},s:{a:0,k:[102,102,100],ix:6}},ao:0,w:8108,h:7568,ip:0,op:150,st:0,bm:0}]}},function(e,n,t){"use strict";e.exports=function(e){e.controller("searchController",["$scope","query","navigate","$routeParams","dataBlock","$filter","$location",function(e,n,t,r,i,a,o){e.group=r.group,e.data=i,e.query=n.query,e.resultCount=0,e.blocks=[];var l,s=angular.element(document.getElementById("mainContent"));if(s.scrollTop(0),e.scrollTop=function(){s.scrollTop(0)},e.scrollTo=function(e){var n=a("nospaces")(e),t=angular.element(document.getElementById(n.toLowerCase()));s.scrollToElement(t,50,120)},e.goTo=function(n,t,r){var i=r?a("nospaces")(r).toLowerCase():void 0,l=a("nospaces")(n,"-"),s=a("nospaces")(t,"-");i?o.url("content/"+e.group+"/blocks/"+l+"/chapter/"+s+"#"+i):o.url("content/"+e.group+"/blocks/"+l+"/chapter/"+s)},e.data&&e.query){var c={keys:["subtitle","components.text","components.list_elements.text","components.links.text","components.subtitle","components.title","components.publisher","components.authors.name"],threshold:e.query.length>7?.2:e.query.length>5?.1:.05,distance:800,minMatchCharLength:n.query.length>7?n.query.length-2:n.query.length>4?n.query.length-1:n.query.length,sort:!0,includeMatches:!0,includeScore:!0};l=[],e.data.forEach(function(t){t.chapters.forEach(function(r){var i=new Fuse(r.sections,c),a=i.search(n.query);if(a.length>0)for(var o=0;o<a.length;o++)a[o].matches.forEach(function(n){if(!l.includes(n.value.trim())){switch(n.key){case"subtitle":e.resultCount++,e.blocks.some(function(e){return e.name===t.name&&(e.count++,e.matches.sections.push({ref:a[o].item.subtitle,search:n,block:t.name,chapter:r.name,score:a[o].score}),!0)})||e.blocks.push({name:t.name,count:1,matches:{sections:[{ref:a[o].item.subtitle,search:n,block:t.name,chapter:r.name,score:a[o].score}],components:[],"external links":[],documents:[]}});break;case"components.text":case"components.list_elements.text":case"components.subtitle":case"components.links.text":case"components.title":case"components.publisher":case"components.authors.name":e.resultCount++,e.blocks.some(function(e){if(e.name===t.name){e.count++;var i=Math.round(100-a[o].score/.2*100);return e.matches.components.push({ref:a[o].item.subtitle||"",key:n.key,search:n,block:t.name,chapter:r.name,score:a[o].score,relevance:i}),i>e.maxRelevance&&(e.maxRelevance=i),!0}return!1})||e.blocks.push({name:t.name,count:1,matches:{sections:[],components:[{ref:a[o].item.subtitle,key:n.key,search:n,block:t.name,chapter:r.name,score:a[o].score,relevance:Math.round(100-a[o].score/.2*100),indices:n.indices}],"external links":[],documents:[]},maxRelevance:Math.round(100-a[o].score/.2*100)})}l.push(n.value.trim())}})})}),e.blocks.sort(function(e,n){return n.maxRelevance-e.maxRelevance})}}])}},function(e,n,t){"use strict";e.exports=function(e){e.controller("TestCtrl",["$scope","dataFetcher","navigate","$routeParams","$location","$timeout",function(e,n,t,r,i,a){e.home=!0,e.$on("$locationChangeSuccess",function(n,t){"/"!==i.path()?e.home=!1:e.home=!0,i.path().indexOf("search")>-1?e.searchState=!0:e.searchState=!1}),e.$watch(function(){return r.hasOwnProperty("group")&&i.path().indexOf("content")>-1},function(n){n&&"undefined"!==n?(e.inContentState=!0,e.data=t.getData(),e.$watch(function(){return t.lowEnd()},function(n,t){e.lowEnd=n}),e.$watch(function(){return t.highEnd()},function(n,t){e.highEnd=n})):e.inContentState=!1}),e.$watch(function(){return i.path().indexOf("admini")>-1},function(n){e.adminState=!!n}),e.$on("$dataWasLoaded",function(n,t){i.path().indexOf("content")>-1&&a(function(){var n=$(window).height(),t=document.getElementById("mainContent").scrollHeight;e.heightBiggerThanWindow=t>n},0),e.$broadcast("dataWasLoaded",t)}),e.$on("ifsPrepareScroll",function(n,t){e.$broadcast("ifsScrollTo",t)}),e.lowEnd=!0,e.highEnd=!1,e.goToPrevious=function(){t.goToPrevious()},e.goToNext=function(){t.goToNext()},e.dataCopy=angular.copy(e.data),e.addElem=function(){e.data.push({name:"Edit this block",chapters:[{name:"Introduction",sections:[]}]})},e.submitSearch=function(e,n){if(!n.$invalid){var r=t.getGroup();i.search({query:e}),i.hash([]),i.path("/"+r+"/search")}},e.resetSearch=function(){e.searchTerm=""}}])}},function(e,n,t){"use strict";e.exports=function(e){e.factory("dataFetcher",["$resource","$cacheFactory",function(e,n){var t=e("/data/:source",{source:"@source"},{query:{method:"GET",isArray:!0}});return{get:function(e){n.get("$http");return t.query({source:e})},post:function(e,n){return t.save({source:e},n)}}}])}},function(e,n,t){"use strict";e.exports=function(e){e.factory("navigate",["$location","$filter",function(e,n){var t,r,i,a,o="/";return{urlIsValid:function(e){if(r=e.group,e.hasOwnProperty("chaptername")){var o=n("tospaces")(e.blockname,"-"),l=n("tospaces")(e.chaptername,"-");return i=t.findIndex(function(e){return e.name===o}),i>-1&&(a=t[i].chapters.findIndex(function(e){return e.name===l})),!(-1===i||-1===a)}if(e.hasOwnProperty("blockname")){var o=e.blockname;return i=t.findIndex(function(e){return e.name===o}),a=-1,-1!==i}return!1},errorPage:function(){i=-1,a=-1,e.path("/404")},setData:function(e,n){t=e,r=n,i=0,a=-1},getData:function(){return t},getGroup:function(){return r},goTo:function(n,t){t?e.url("/content/"+r+"/blocks/"+n+"/chapter/"+t):e.url("/content/"+r+"/blocks/"+n)},lowEnd:function(){return 0===i&&a<=0||-1===i&&-1===a},highEnd:function(){return i===t.length-1&&a===t[t.length-1].chapters.length-1||-1===i},goToNext:function(){var l,s;-1===a?(l=t[i].name,s=t[i].chapters[a+1].name,e.url("/content/"+r+"/blocks/"+n("nospaces")(l,"-")+"/chapter/"+n("nospaces")(s,"-")),o="/blocks/"+n("nospaces")(l,"-")+"/chapter/"+n("nospaces")(s,"-")):a<t[i].chapters.length-1?(l=t[i].name,s=t[i].chapters[a+1].name,e.url("/content/"+r+"/blocks/"+n("nospaces")(l,"-")+"/chapter/"+n("nospaces")(s,"-")),o="/blocks/"+n("nospaces")(l,"-")+"/chapter/"+n("nospaces")(s,"-")):a===t[i].chapters.length-1&&(l=t[i+1].name,s=t[i+1].chapters[0].name,e.url("/content/"+r+"/blocks/"+n("nospaces")(l,"-")+"/chapter/"+n("nospaces")(s,"-")),o="/blocks/"+n("nospaces")(l,"-")+"/chapter/"+n("nospaces")(s,"-"))},goToPrevious:function(){var o,l;a>0?(a--,o=t[i].name,l=t[i].chapters[a].name,e.url("/content/"+r+"/blocks/"+n("nospaces")(o,"-")+"/chapter/"+n("nospaces")(l,"-"))):(i--,o=t[i].name,a=t[i].chapters.length-1,l=t[i].chapters[a].name,e.url("/content/"+r+"/blocks/"+n("nospaces")(o,"-")+"/chapter/"+n("nospaces")(l,"-")))},getDataBlock:function(e,n){return a>-1?[t[i].chapters[a],a]:[t[i],i]},getDataLength:function(){return t.length},getBlockLength:function(){return t[i].chapters.length}}}])}},function(e,n,t){"use strict";e.exports=function(e){e.factory("fileService",["$resource","$cacheFactory","$window",function(e,n,t){function r(e){return new Promise(function(n,t){(!e||e.length<1)&&t({});var r={},i=e.length,a=0,o=!0,l=!1,s=void 0;try{for(var c,d=e[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var p=c.value;!function(e){var t=new FileReader;t.onload=function(t){a++,r[e.name]={},r[e.name].type=e.type,r[e.name].content=t.target.result,a==i&&n(r)},t.readAsBinaryString(e)}(p)}}catch(e){l=!0,s=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw s}}})}var i=e("/files/:folder",{folder:"@folder"},{query:{method:"GET",isArray:!0}}),a={},o={};return{get:function(e){return i.query({folder:e})},post:function(){var e=[],n=!0,o=!1,l=void 0;try{for(var s,c=Object.keys(a)[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var d=s.value,p="";p=a[d].file.type.startsWith("image")?"images/":"pdfs/";var m=!0,u=!1,f=void 0;try{for(var h,g=a[d].context[Symbol.iterator]();!(m=(h=g.next()).done);m=!0){var v=h.value;switch(v.type){case"image-single":v.src=p+d;break;case"video-single":v.video.thumb=p+d;break;case"link-pdf":v.link=p+d;break;default:v.link=p+d}}}catch(e){u=!0,f=e}finally{try{!m&&g.return&&g.return()}finally{if(u)throw f}}e.push(a[d].file)}}catch(e){o=!0,l=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw l}}return r(e).then(function(e){var n=!0,r=!1,o=void 0;try{for(var l,s=Object.keys(a)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=l.value;t.URL.revokeObjectURL(a[c].url)}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i.save(e)}).catch(function(e){})},addFile:function(e){var n=e[1],t=e[0];a.hasOwnProperty(n.name)?a[n.name].context?a[n.name].context.push(t):a[n.name]={file:n,context:t}:a[n.name]={file:n,context:[t]}},createUrls:function(e){function n(e){return e.hasOwnProperty("link")?"link":e.hasOwnProperty("src")?"src":"thumb"}if(e){var r=e[1],i=e[0];return a[r.name].url||(a[r.name].url=t.URL.createObjectURL(r)),"image-single"===i.type?i.src=a[r.name].url:"video-single"===i.type&&(i.video.thumb=a[r.name].url),void(o[a[r.name].url]=r.name)}var l=!0,s=!1,c=void 0;try{for(var d,p=Object.keys(a)[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var m=d.value;!function(e){a[e].hasOwnProperty("url")||(a[e].url=t.URL.createObjectURL(a[e].file),o[a[e].url]=a[e].file.name),a[e].context.forEach(function(t){t[n(t)]=a[e].url})}(m)}}catch(e){s=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(s)throw c}}},destroyUrls:function(){var e=!0,n=!1,r=void 0;try{for(var i,o=Object.keys(a)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var l=i.value;t.URL.revokeObjectURL(a[l].url)}}catch(e){n=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}},remove:function(e,n){if(n){var r=a[n].context.findIndex(function(n){return n.$$hashKey===e.$$hashKey});r>-1&&a[n].context.splice(r,1),0==a[n].context.length&&(a[n].hasOwnProperty("url")&&t.URL.revokeObjectURL(a[n].url),delete a[n])}else{var i=!0,o=!1,l=void 0;try{for(var s,c=Object.keys(a)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var d=s.value,p=a[d],m=p.context.findIndex(function(n){return n.$$hashKey===e.$$hashKey});m>-1&&p.context.splice(m,1),0==p.context.length&&(p.hasOwnProperty("url")&&t.URL.revokeObjectURL(p.url),delete a[d])}}catch(e){o=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw l}}}},getFileName:function(e){return o[e]},log:function(){}}}])}},function(e,n,t){"use strict";e.exports=function(e){e.factory("links",[function(){return{links:[]}}])}},function(e,n,t){"use strict";e.exports=function(e){e.factory("authors",[function(){return{authors:""}}])}},function(e,n,t){"use strict";e.exports=function(e){e.filter("capitalize",[function(){return function(e){return e[0].toUpperCase()+e.slice(1)}}])}},function(e,n,t){"use strict";e.exports=function(e){e.filter("nospaces",function(){return function(e,n){var t=n||"";if(e)return e.replace(/\s/g,t)}}),e.filter("tospaces",function(){return function(e,n){var t=new RegExp(n,"gi");if(e)return e.replace(t," ")}})}},function(e,n,t){"use strict";e.exports=function(e){e.filter("singular",function(){return function(e){return e.slice(0,e.length-1)}})}},function(e,n,t){"use strict";e.exports=function(e){e.filter("nicename",[function(){return function(e){return[{display:"Paragraph",type:"text-paragraph",icon:" fa fa-align-justify"},{display:"List",type:"list-text",icon:"fa fa-list"},{display:"Link(PDF)",type:"link-pdf",icon:"fa fa-file-pdf-o"},{display:"Link(Email)",type:"link-email",icon:"fa fa-envelope-o"},{display:"Reference",type:"link-reference",icon:"fa fa-address-book-o"},{display:"Quiz",type:"quiz",icon:"fa fa-question-circle-o"},{display:"Video",type:"video-single",icon:"fa fa-play"},{display:"Video(Multiple)",type:"video-carousel",icon:"fa fa-file-video-o"},{display:"Link(Web)",type:"link-website",icon:"fa fa-globe"},{display:"Telephone Number",type:"link-telephone",icon:"fa fa-phone"},{display:"Thought Bubble",type:"thought-bubble",icon:"fa fa-comment"},{display:"Myth",type:"text-mythfact",icon:"fa fa-lightbulb-o"},{display:"Alert",type:"text-alert",icon:"fa fa-exclamation"},{display:"Image",type:"image-single",icon:"fa fa-image"},{display:"Quote",type:"text-quote",icon:"fa fa-quote-right"}].find(function(n){return n.type===e}).display}}])}},function(e,n,t){"use strict";e.exports=function(e){e.directive("chapterSummaryAdmin",function(){return{restrict:"E",scope:{},template:t(1),link:function(e,n,t,r){},controller:["$scope","navigate","$location","$timeout",function(e,n,t,r){e.adminMode=!0,e.titles=[],e.$on("dataWasLoaded",function(n,t){if(!t)return void(e.titles=[]);e.titles=[];for(var r=0;r<t.length;r++)e.titles.push(t[r].subtitle)}),e.scrollTo=function(n,t){t.stopPropagation(),t.preventDefault();var r=n.replace(/\s/g,"").toLowerCase();e.$emit("ifsPrepareScroll",[r])},e.sendAddSectionMessage=function(){e.$emit("addSection")}}]}})}},function(e,n,t){"use strict";e.exports=function(e){e.directive("navMenuAdmin",function(){return{template:t(32),restrict:"E",link:function(e,n){},controller:["$scope",function(e){!function(){function n(n){return{blockname:e.data[n].name,name:"New Chapter "+ ++i,sections:[]}}function t(){return{name:"New Section "+ ++r,chapters:[{blockname:"New Section "+r,name:"Introduction",sections:[]}]}}var r=0,i=0}();e.data&&(e.selected=e.data[0].name,e.chSelected=e.data[0].name+"-"+e.data[0].chapters[0].name),e.select=function(n,t){t.preventDefault(),t.stopPropagation(),e.selected=e.data[n].name,e.chSelected=e.data[n].name+"-"+e.data[n].chapters[0].name,e.$emit("ChangeChapter",n,0)},e.selectChapter=function(n,t,r){r.preventDefault(),r.stopPropagation(),e.selected=e.data[n].name,e.chSelected=e.data[n].name+"-"+e.data[n].chapters[t].name,e.$emit("ChangeChapter",n,t)}}]}})}},function(e,n){e.exports='<nav class="navbar-nav navbar-light navbar-expand-md main-navigation" >\r\n    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#rsSidebar" aria-controls="rsSidebar" aria-expanded="false" aria-label="Toggle navigation">\r\n        <span class="navbar-toggler-icon"></span>\r\n    </button>\r\n    <div class="navbar-collapse collapse" id="rsSidebar">\r\n        <ul class="nav rs-sidebar flex-column flex-nowrap" ifs-extendable ifs-extendable-callback="addBlock()" ifs-extendable-title="Add New Block" data-classes="btn-info">\r\n            <li class="nav-item blah blah-again" ng-repeat="block in data" ng-class="{active: selected===block.name}" ifs-editable="Block" callback-array="data">\r\n                <a href="" class="nav-link block-link small " ng-click="select($index,$event)">{{block.name}}</a>\r\n                <ul class=" nav rs-sub flex-column flex-nowrap" ng-show="selected===block.name" ifs-extendable ifs-extendable-callback="addChapter($index)" ifs-extendable-title="Add New Chapter" data-classes="btn-success">\r\n                    <li class="nav-item border border-success" ifs-editable="Chapter" callback-array="block.chapters" ng-repeat="chapter in block.chapters" ng-class="{\'sub-active\':chSelected === (block.name+\'-\'+chapter.name)}" >\r\n                        <a href="" class="nav-link chapter-link h-100 small border border-primary"  ng-click="selectChapter($parent.$index,$index,$event)">{{chapter.name}}</a>\r\n                    </li>\r\n\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</nav>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("undoList",["$compile","$timeout",function(e,n){return{restrict:"E",template:t(34),link:function(e,t,r){e.$watch("undoMode",function(e){e&&n(function(){$(t).find(".undo-panel")[0].scrollTop=0},0)}),e.$watchCollection("undoItems",function(e,n){if(e.length>n.length){for(var r="",i=0;i<e[0].title.length;i++)r+='<p><span class="text-dark font-weight-bold">'+e[0].title[i][0]+":</span> "+e[0].title[i][1]+"</p>";var a=$(t).find(".undo-list-item").first(),o=$(a).find(".undo-list-item-title").first(),l=$(t).find(".undo-item-icon span").first(),s=$(a).find(".undo-item-summary").first();switch(e[0].event){case"move":l.addClass("fa-exchange"),a.addClass("move");break;case"delete":l.addClass("fa-trash"),a.addClass("delete");break;case"add":l.addClass("fa-plus"),a.addClass("add");break;case"edit":l.addClass("fa-pencil-square-o"),a.addClass("edit")}o.html(r),s.html(e[0].summary)}}),$(t).on("click",function(e){e.preventDefault(),e.stopPropagation()})},controller:["$scope",function(e){}]}}])}},function(e,n){e.exports='<div class="undo-panel text-center">\r\n    <div class="undo-list">\r\n        <div class="undo-list-item" ng-repeat="item in undoItems">\r\n            <div class="undo-item-icon">\r\n                <span class="fa"></span>\r\n            </div>\r\n            <div class="undo-text">\r\n                <h5 class="undo-list-item-title"></h5>\r\n                <p class="undo-item-summary"></p>\r\n            </div>\r\n\r\n            <button class="btn btn-warning undo-action" ng-click="resolveUndo($index)">UNDO</button>\r\n        </div>\r\n    </div>\r\n    <div ng-if="!undoItems || undoItems.length==0">\r\n        No actions have been performed yet.\r\n    </div>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("collapsibleElem",["$compile","$timeout",function(e,n){return{restrict:"A",link:function(t,r,i){var a=i.collapsibleElem;t.collapsed=!1;var o=angular.element('<button class="btn btn-sm py-0" ng-click="toggleCollapse()"> <span class="fa fa-minus-square mr-2"></span> <span class="button-text">Collapse</span></button>');o.css({position:"absolute",top:"-1.2rem",right:"Section"===a?"25%":"37%","z-index":"100"}),o.addClass("Section"===a?"btn-info w-50":"btn-danger w-25");var l=e(o)(t);n(function(){r.addClass("position-relative"),r.append(l)},0),t.toggleCollapse=function(){$(r).find(".collapsible").first().toggleClass("collapse"),t.collapsed=!t.collapsed,t.collapsed?o.find(".button-text").text("Show"):o.find(".button-text").text("Collapse")}},controller:["$scope",function(e){}]}}])}},function(e,n,t){"use strict";e.exports=function(e){e.directive("editElement",["$parse","$uibModal","$timeout",function(e,n,r){return{restrict:"E",template:t(37),link:function(i,a,o){var l,s=e(o.contextArray)(i),c=e(o.indexInContext)(i),d=o.editType;if("Chapter"===d)i.$watch("selChapter",function(e,n){l=e});else{l=s[c];var p=i[o.chapter],m=e(o.section)(i)}$(a).click(function(e){if(n){var a=angular.copy(l),o=!1,u=0,f=i.$watch(function(){return l},function(){u>0&&(o=!0,f()),u++},!0);n.open({template:t(38),controller:"ArrayEditModalCtrl",animation:!1,windowClass:"my-modal modal-edit",backdrop:"static",resolve:{item:function(){return{element:l,chapter:p?p.name:"",section:m||void 0,type:d}}}}).result.then(function(e){o||e.reboot?("Section"===d&&i.broadcast(),e.reboot&&(s[c]=void 0,r(function(){s[c]=e.element},100)),i.registerUndo("Edit",{type:d,context:s,index:c,element:e.reboot?e.element:l,master:a,title:"Component"===d?a.type:"Section"===d?a.subtitle:a.name})):f()},function(e){s[c]=angular.copy(a),l=s[c]})}})},controller:["$scope",function(e){}]}}])}},function(e,n){e.exports='<div class="edit-element-section d-inline">\r\n    <button class="btn btn-info py-0 px-1">\r\n        <span class="fa fa-pencil-square-o edit-icon"></span>\r\n    </button>\r\n</div>'},function(e,n){e.exports='<div class="card main">\r\n    <div class="card-header main p-0">\r\n        <p class="mb-0">\r\n            Edit {{item.type}}\r\n            <span class="float-right fa fa-close" style="cursor:pointer" ng-click="dismissModal()"></span>\r\n        </p>\r\n\r\n    </div>\r\n    <form name="masterForm" id="masterForm" novalidate>\r\n        \x3c!-- Sections and Components --\x3e\r\n        <div class="card-body component-edit-form" ng-if="item.type!==\'Chapter\'">\r\n            \x3c!-- title --\x3e\r\n            <div class="px-3 py-1 font-weight-bold">\r\n                <h5>\r\n                    <span>Chapter <span class="text-success">{{item.chapter}}</span> <span ng-if="item.section.subtitle"> > Section <span class="text-danger">{{item.section.subtitle}}</span> </span></span>\r\n                </h5>\r\n\r\n            </div>\r\n\r\n            <div class="component-basics form-section">\r\n                \x3c!-- Component Basics --\x3e\r\n                <div class="card mb-2" collapsible-card>\r\n                    <div class="card-header p-1">\r\n                        <p class="form-subtitle p-0 m-0 pl-3 font-weight-bold">Component Basics<span class="fa fa-minus float-right" style="line-height: 1.5"></span></p>\r\n                    </div>\r\n                    <div class="card-body collapse">\r\n                        <ng-form name="basicsForm" novalidate class="">\r\n                            <div class="form-group text-center">\r\n                                <label for="componentName" class="font-weight-bold">Subtitle: </label>\r\n                                <input id="componentName" name="componentName" class="form-control  m-auto" ng-model="item.element.subtitle" placeholder="Enter a name...{{item.section ? \'(optional)\' : \'\'}}" ng-required="!item.section">\r\n                                <span ng-if="masterForm.basicsForm.$dirty &&  masterForm.basicsForm.componentName.$error.required">Required</span>\r\n\r\n                            </div>\r\n                            <div class="form-group text-center">\r\n                                <input class="form-check-input" type="checkbox" ng-model="item.element[\'space_after\']" id="componentHr">\r\n                                <label class="form-check-label" for="componentHr">Draw horizontal line at the end</label>\r\n                            </div>\r\n                        </ng-form>\r\n                    </div>\r\n                </div>\r\n\r\n                \x3c!-- Component Type selector --\x3e\r\n                <div class="card mb-2" ng-if="item.element.hasOwnProperty(\'type\')" collapsible-card>\r\n                    <div class="card-header p-1">\r\n                        <p class="form-subtitle p-0 m-0 pl-3 font-weight-bold">Component Type<span class="fa fa-minus float-right" style="line-height: 1.5"></span></p>\r\n                    </div>\r\n                    <div class="card-body collapse">\r\n                        <ng-form name="typeForm" novalidate>\r\n                            <div class="form-group text-center types">\r\n                                <label for="componentType">Component Type: </label>\r\n                                <select id="componentType" class="custom-select" ng-model="item.element.type" ng-required="true">\r\n                                    <option ng-repeat="type in types" ng-value="type.type">\r\n                                        <div class="flex-item">\r\n                                            <span class="{{type.icon}}" style="width: 25px"></span>\r\n                                            <span class="ml-2 small" style="width: 75px">{{type.type | nicename}}</span>\r\n                                        </div>\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                            <p>Current type: {{item.element.type}}</p>\r\n                        </ng-form>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="card mb-2" ng-if="item.element.hasOwnProperty(\'type\')" collapsible-card>\r\n                    <div class="card-header p-1">\r\n                        <p class="form-subtitle p-0 m-0 pl-3 font-weight-bold">{{item.element.type | nicename}} Options<span class="fa fa-minus float-right" style="line-height: 1.5"></span></p>\r\n                    </div>\r\n                    <div class="card-body collapse">\r\n                        <text-paragraph-admin ng-if="item.element.type===\'text-paragraph\'" item="item.element"></text-paragraph-admin>\r\n                        <text-quote-admin ng-if="item.element.type===\'text-quote\'"></text-quote-admin>\r\n                        <text-alert-admin ng-if="item.element.type===\'text-alert\' || item.element.type===\'thought-bubble\'"></text-alert-admin>\r\n                        <text-myth-admin ng-if="item.element.type===\'text-mythfact\'"></text-myth-admin>\r\n                        <reference-admin ng-if="item.element.type===\'link-reference\'"></reference-admin>\r\n                        <telephone-admin ng-if="item.element.type===\'link-telephone\'"></telephone-admin>\r\n                        <email-admin ng-if="item.element.type===\'link-email\'"></email-admin>\r\n                        <website-links-admin ng-if="item.element.type===\'link-website\'"></website-links-admin>\r\n                        <list-admin ng-if="item.element.type===\'list-text\'"></list-admin>\r\n                        <files-admin ng-if="item.element.type===\'link-pdf\'"></files-admin>\r\n                        <image-admin ng-if="item.element.type===\'image-single\'"></image-admin>\r\n                        <video-admin ng-if="item.element.type===\'video-single\'" item="item.element"></video-admin>\r\n                        <video-carousel-admin ng-if="item.element.type===\'video-carousel\'"></video-carousel-admin>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n        \x3c!-- Only for Chapters--\x3e\r\n        <div class="card-body component-edit-form" ng-if="item.type===\'Chapter\'">\r\n            <ng-form name="chapterForm" novalidate >\r\n                <div class="form-group text-center">\r\n                    <label for="chapterName" class="font-weight-bold">Chapter Name: </label>\r\n                    <input id="chapterName" name="chapterName" class="form-control  m-auto" ng-model="item.element.name" placeholder="Enter a name...{{item.section ? \'(optional)\' : \'\'}}" ng-required="true">\r\n                    <span ng-if="masterForm.chapterForm.$dirty &&  masterForm.chapterForm.chapterName.$error.required">Required</span>\r\n                </div>\r\n            </ng-form>\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        <div class="card-footer main text-center">\r\n            <button type="submit" class="btn btn-success mx-4 " ng-click="closeModal(masterForm)">Save</button>\r\n            <button class="btn btn-danger mx-4"  ng-click="dismissModal($event)">Close without saving</button>\r\n        </div>\r\n    </form>\r\n\r\n\r\n\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("textParagraphAdmin",["$parse",function(e){return{restrict:"E",scope:{item:"="},template:t(40),link:function(e,n,t,r){t.hasOwnProperty("formName")},controllerAs:"ctrl",controller:["links","$scope",function(e,n){n.item.hasOwnProperty("links")?this.links=n.item.links:(n.item.links=[],this.links=n.item.links),this.createLinks=function(){n.item.links=[{}],this.links=n.item.links},this.addLink=function(){this.links.push({})}}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" class="sub-form" novalidate>\r\n    <div class="form-group text-center">\r\n        <label for="textParagraph">Text:</label>\r\n        <textarea class="form-control" name="textParagraph" id="textParagraph" cols="30" rows="5" ng-model="item.text"></textarea>\r\n\r\n    </div>\r\n    <div class="form-group text-center">\r\n        <input class="form-check-input" type="checkbox" ng-model="item.embolden" id="componentHr">\r\n        <label class="form-check-label" for="componentHr">Emphasize text</label>\r\n    </div>\r\n    <a class="btn btn-info float-right text-white p-1" ng-if="!ctrl.links.length" ng-click="ctrl.createLinks()">Embed Links</a>\r\n    <div class="w-100">\r\n        <div class="card mb-2 link-card" collapsible-card ng-repeat="link in ctrl.links" ifs-editable="Link" callback-array="ctrl.links" ifs-editable-class="mr-4">\r\n            <div class="card-header p-1" >\r\n                <p class="form-subtitle p-0 m-0 pl-3 font-weight-bold">Link {{$index}}<span class="fa fa-minus float-right" style="line-height: 1.5" ></span></p>\r\n            </div>\r\n            <div class="card-body collapse">\r\n                <div class="form-group text-center">\r\n                    <label for="linkportion{{$index}}">Text to Hyperlink</label>\r\n                    <input id="linkportion{{$index}}" name="linkportion{{$index}}" class="form-control m-auto" ng-model="link.portion" placeholder="The portion of text to be hyperlinked" ng-required="true">\r\n                </div>\r\n                <div class="form-group text-center">\r\n                    <label for="link{{$index}}">URL</label>\r\n                    <input id="link{{$index}}" name="link{{$index}}" class="form-control m-auto" ng-model="link.href" placeholder="Url to link to" ng-required="true">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <a class="btn btn-info float-right text-white p-1" ng-if="ctrl.links.length>0" ng-click="ctrl.addLink()">Add Link</a>\r\n    </div>\r\n</ng-form>\r\n\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.directive("textQuoteAdmin",[function(){return{restrict:"E",template:t(42),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["links","$scope",function(e,n){}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <div class="form-group text-center">\r\n        <label for="textParagraph">Text:</label>\r\n        <textarea class="form-control" name="textParagraph" id="textParagraph" cols="30" rows="5" ng-model="item.element.text"></textarea>\r\n    </div>\r\n    <div class="form-group text-center">\r\n        <label for="yearQuote">Year:</label>\r\n        <input class="form-control" name="yearQuote" id="yearQuote"  ng-model="item.element.year">\r\n    </div>\r\n    <div class="form-group text-center">\r\n        <label for="authorQuote">Author:</label>\r\n        <input class="form-control" name="authorQuote" id="authorQuote"  ng-model="item.element.author">\r\n    </div>\r\n</ng-form>\r\n\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.directive("textAlertAdmin",[function(){return{restrict:"E",template:t(44),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["links","$scope",function(e,n){}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <div class="form-group text-center">\r\n        <label for="textParagraph">Text:</label>\r\n        <textarea class="form-control" name="textParagraph" id="textParagraph" cols="30" rows="5" ng-model="item.element.text"></textarea>\r\n    </div>\r\n</ng-form>\r\n\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.directive("textMythAdmin",[function(){return{restrict:"E",template:t(46),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["links","$scope",function(e,n){this.myths=n.item.element.myths,this.createMyths=function(){n.item.element.myths=[{}],this.myths=n.item.element.myths},this.addMyth=function(){this.myths.push({})}}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <a class="btn btn-info float-right text-white p-1" ng-if="!ctrl.myths.length" ng-click="ctrl.createMyths()">Add Myth/Fact</a>\r\n    <div class="w-100">\r\n        <div class="card mb-2 link-card" collapsible-card ng-repeat="mf in ctrl.myths" ifs-editable="Link" callback-array="ctrl.myths" ifs-editable-class="mr-4">\r\n            <div class="card-header p-1" >\r\n                <p class="form-subtitle p-0 m-0 pl-3 font-weight-bold">Link {{$index}}<span class="fa fa-minus float-right" style="line-height: 1.5" ></span></p>\r\n            </div>\r\n            <div class="card-body collapse">\r\n                <div class="form-group text-center">\r\n                    <label for="myth{{$index}}">Myth</label>\r\n                    <textarea id="myth{{$index}}" name="myth{{$index}}" class="form-control m-auto" ng-model="mf.myth" placeholder="The myth..." ng-required="true"></textarea>\r\n                    <p class="form-text small text-danger" ng-if="componentSpecifics[\'myth\'+$index].$error.required">You must enter some text here.</p>\r\n\r\n                </div>\r\n                <div class="form-group text-center">\r\n                    <label for="fact{{$index}}">Fact</label>\r\n                    <textarea id="fact{{$index}}" name="fact{{$index}}" class="form-control m-auto" ng-model="mf.fact" placeholder="The fact..." ng-required="true"></textarea>\r\n                    <p class="form-text small text-danger" ng-if="componentSpecifics[\'fact\'+$index].$error.required">You must enter some text here.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <a class="btn btn-info float-right text-white p-1" ng-if="ctrl.myths.length>0" ng-click="ctrl.addMyth()">Add Myth/Fact</a>\r\n    </div>\r\n</ng-form>\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.directive("referenceAdmin",[function(){return{restrict:"E",template:t(48),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["links","$scope","authors",function(e,n,t){n.item.element.hasOwnProperty("authors")&&n.item.element.authors.length>0?this.authors=n.item.element.authors.reduce(function(e,n){return e.concat(n.name+"\n")},""):this.authors="";var r=n.$watch(function(){return n.ctrl.authors},function(e,n){t.authors=e,console.log("Updating authors")});n.$on("destroy",function(e){r()})}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <div class="form-group text-center">\r\n        <label for="textTitle">Title:</label>\r\n        <input class="form-control" name="textTitle" id="textTitle" ng-model="item.element.title" ng-required="true">\r\n        <p class="form-text small text-danger" ng-if="componentSpecifics.textTitle.$error.required">Title is required.</p>\r\n    </div>\r\n    <div class="form-group text-center">\r\n        <label for="textAuthors">Authors:</label>\r\n        <textarea class="form-control" name="textAuthors" id="textAuthors" rows="5" cols="25"  ng-model="ctrl.authors" ></textarea>\r\n\r\n        <small  class="form-text text-success">\r\n            If there are multiple authors, please only write 1 author per line. Make sure you end each line by pressing ENTER.\r\n        </small>\r\n    </div>\r\n    <div class="form-group text-center">\r\n        <label for="textVolume">Volume:</label>\r\n        <input class="form-control" name="textVolume" id="textVolume"  ng-model="item.element.volume">\r\n    </div>\r\n\r\n    <div class="form-group text-center">\r\n        <label for="textYear">Year:</label>\r\n        <input class="form-control" name="textYear" id="textYear"  ng-model="item.element.year" ng-pattern="/^[0-9]{4}$/">\r\n        <span ng-if="componentSpecifics.textYear.$error.pattern"> Must be in the format <span class="font-italic text-success">yyyy</span></span>\r\n    </div>\r\n    <div class="form-group text-center">\r\n        <label for="textPages">Pages:</label>\r\n        <input class="form-control" name="textPages" id="textPages"  ng-model="item.element.pages">\r\n    </div>\r\n    <div class="form-group text-center">\r\n        <label for="textPublisher">Publisher:</label>\r\n        <input class="form-control" name="textPublisher" id="textPublisher"  ng-model="item.element.publisher">\r\n    </div>\r\n    <div class="form-group text-center">\r\n        <label for="textVolume">URL:</label>\r\n        <input type="url" class="form-control" name="textLink" id="textLink"  ng-model="item.element.link" optional>\r\n    </div>\r\n</ng-form>\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.directive("telephoneAdmin",[function(){return{restrict:"E",template:t(50),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["$scope",function(e){}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <div class="form-group text-center">\r\n        <label for="tel">Contact No:</label>\r\n        <input class="form-control" name="tel" id="tel"  ng-model="item.element.text" ng-required="true">\r\n        <p class="form-text small text-danger" ng-if="componentSpecifics.tel.$error.required">Write the telephone number here. Cannot be empty</p>\r\n    </div>\r\n</ng-form>\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.directive("emailAdmin",[function(){return{restrict:"E",template:t(52),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["$scope",function(e){this.mails=e.item.element.links,this.createMails=function(){e.item.element.links=[{}],this.mails=e.item.element.links},this.addMail=function(){this.mails.push({})}}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <a class="btn btn-info float-right text-white p-1" ng-if="!ctrl.mails.length" ng-click="ctrl.createMails()">Add Email</a>\r\n    <div class="w-100">\r\n        <div class="card mb-2 link-card" collapsible-card ng-repeat="mail in ctrl.mails" ifs-editable="Link" callback-array="ctrl.mails" ifs-editable-class="mr-4">\r\n            <div class="card-header p-1" >\r\n                <p class="form-subtitle p-0 m-0 pl-3 font-weight-bold">Mail {{$index}}<span class="fa fa-minus float-right" style="line-height: 1.5" ></span></p>\r\n            </div>\r\n            <div class="card-body collapse">\r\n                <div class="form-group text-center">\r\n                    <label for="label{{$index}}">Label:</label>\r\n                    <input id="label{{$index}}"  name="label{{$index}}" class="form-control m-auto" ng-model="mail.tag" placeholder="Label to show" optional>\r\n                    <label for="myth{{$index}}">E-mail:</label>\r\n                    <input id="myth{{$index}}" type="email" name="myth{{$index}}" class="form-control m-auto" ng-model="mail.text" ng-model-options="{updateOn: \'blur\'}" placeholder="Enter email" ng-required="true">\r\n                    <p class="form-text small text-danger" ng-if="componentSpecifics[\'myth\'+$index].$error.required">You must enter an e-mail address. Delete this entry if you don\'t need it.</p>\r\n                    <p class="form-text small text-danger" ng-if="componentSpecifics[\'myth\'+$index].$error.email">This is not an e-mail. Must be in the format aaa@bbb.cc</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <a class="btn btn-info float-right text-white p-1" ng-if="ctrl.mails.length>0" ng-click="ctrl.addMail()">Add another</a>\r\n    </div>\r\n</ng-form>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("videoAdmin",["fileService",function(e){return{restrict:"E",scope:{item:"="},template:t(54),link:function(e,n,t,r){$(n).find('input[type="text"]').on("focus",function(e){$(this).select()}),t.hasOwnProperty("formName")&&$(n).find(".sub-form").attr("name",t["form-name"])},controllerAs:"ctrl",controller:["$scope",function(n){function t(e){if(!e)return!1;var n=/(?:youtube).*(?:\/)(?:watch\?v=)?([-a-zA-Z0-9_]+)(?:\??[-a-zA-Z0-9_=\?&]*)$/,t=n.exec(e);return!!(t&&t.length>1)&&t[1]}var r=this;r.element=n.item,r.element.hasOwnProperty("video")&&r.element.video||(r.element.video={src:"",thumb:""}),r.element.video.thumb?r.element.video.thumb.startsWith("blob")?r.currentImage=e.getFileName(r.element.video.thumb):r.currentImage=r.element.video.thumb.replace("image/",""):r.currentImage="None",n.$watch(function(){return r.element.video.src},function(e,i){if(n.componentSpecifics.url.$valid){var a=t(e);a?(r.youtube=!0,r.element.video.thumb="https://img.youtube.com/vi/"+a+"/maxresdefault.jpg",r.currentImage=r.element.video.thumb,r.element.video.src="https://www.youtube.com/embed/"+a):r.youtube=!1}}),n.$on("receiveFile",function(n,t){n.stopPropagation(),t[0]=r.element,r.currentImage=t[1].name,e.addFile(t),e.createUrls(t)})}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" class="sub-form" novalidate>\r\n    <div class="form-group text-center">\r\n        <label for="videoUrl">URL</label>\r\n        <input type="text" name="url" class="form-control" id="videoUrl" ng-pattern="/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)/"\r\n               ng-model="ctrl.element.video.src" ng-model-options="{debounce: 1000}" ng-required="true">\r\n        <p class="small text-danger" ng-if="componentSpecifics.url.$error.required">You must enter an URL</p>\r\n        <p class="small text-danger" ng-if="componentSpecifics.url.$error.pattern">The text entered does not match an url</p>\r\n    </div>\r\n    <div class="form-group" ng-if="ctrl.element.video.src && !ctrl.youtube">\r\n\r\n        <file-uploader context="ctrl.element" form="componentSpecifics">\r\n            <input type="file"  class="fileUpload" name="fileInput" id="fileInput" ng-model="fileUp" accept="image/*" style="display:none" valid-file="(.jpg|.jpeg|.png)$" data-max-size="20">\r\n            <button type="button" class="fileSelector btn btn-success form-control"><span class="fa fa-upload mr-3"></span>Add {{ctrl.element.video.thumb ? "Another" : ""}} image</button>\r\n            <p class="form-text small">You have entered a non-Youtube link. You have to upload your own thumbnail. Maximum allowed size is 20kb, so if your thumbnail doesn\'t work, resize it to dimensions 200x113</p>\r\n            <p class="small bg-danger text-white" ng-if="componentSpecifics.$error.validFile">Your file is too big ({{this.file.size}}). Maximum allowed is 20KB.</p>\r\n            <p class="small bg-danger text-white" ng-if="componentSpecifics.$error.validType">Your file has to be the an image (.jpg/.jpeg/.png)</p>\r\n        </file-uploader>\r\n    </div>\r\n    <p class="small mt-3 mb-1">Current Image: </p>\r\n    <p class="small bg-dark text-white">{{ctrl.currentImage}}</p>\r\n</ng-form>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("videoCarouselAdmin",[function(){return{restrict:"E",template:t(56),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["$scope",function(e){this.items=e.item.element.videos,this.createItems=function(){e.item.element.videos=[{}],this.items=e.item.element.videos},this.addItem=function(){this.items.push({subtitle:"",type:"video-single",video:{}})},e.$on("$destroy",function(){})}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <a class="btn btn-info float-right text-white p-1" ng-if="!ctrl.items.length" ng-click="ctrl.createItems()">Add List entry</a>\r\n    <div class="w-100">\r\n        <div class="card mb-2 link-card" collapsible-card ng-repeat="item in ctrl.items" ifs-editable="Link" callback-array="ctrl.items" ifs-editable-class="mr-4">\r\n            <div class="card-header p-1" >\r\n                <p class="form-subtitle p-0 m-0 pl-3 font-weight-bold">Video{{$index+1}}<span class="fa fa-minus float-right" style="line-height: 1.5" ></span></p>\r\n            </div>\r\n            <div class="card-body collapse">\r\n                <div class="form-group">\r\n                    <label for="sub{{$index}}">Title: </label>\r\n                    <input type="text" name="sub{{$index}}" id="sub{{$index}}" class="form-control" ng-model="item.subtitle">\r\n                </div>\r\n                <video-admin form-name="video{{$index}}" item="item"></video-admin>\r\n\r\n            </div>\r\n        </div>\r\n        <a class="btn btn-info float-right text-white p-1" ng-if="ctrl.items.length>0" ng-click="ctrl.addItem()">Add another</a>\r\n    </div>\r\n</ng-form>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("filesAdmin",["fileService",function(e){return{restrict:"E",template:t(58),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["$scope",function(n){var t=this;n.uploadFile=function(e){$("#fileElem"+e).click()},n.$on("receiveFile",function(r,i){r.stopPropagation();var a=i[0];i[0]=t.files[a],n.item.element.links[a].link=i[1].name,""!==n.item.element.links[a].text&&n.item.element.links[a].text||(n.item.element.links[a].text=i[1].name),e.addFile(i),e.createUrls(i)}),this.files=n.item.element.links,this.createFiles=function(){n.item.element.links=[{}],this.files=n.item.element.links},this.addFile=function(e){this.files.push({})}}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <a class="btn btn-info float-right text-white p-1" ng-if="!ctrl.files.length" ng-click="ctrl.createFiles()">Add File</a>\r\n    <div class="w-100">\r\n        <div class="card mb-2 link-card" collapsible-card ng-repeat="file in ctrl.files" ifs-editable="File" callback-array="ctrl.files" ifs-editable-class="mr-4">\r\n            <div class="card-header p-1" >\r\n                <p class="form-subtitle p-0 m-0 pl-3 font-weight-bold">File {{$index}}<span class="fa fa-minus float-right" style="line-height: 1.5" ></span></p>\r\n            </div>\r\n            <div class="card-body collapse">\r\n                    <div class="form-row">\r\n                        <div class="form-group col">\r\n                            <label for="label{{$index}}">Text:</label>\r\n                            <input id="label{{$index}}" type="text" name="label{{$index}}" class="form-control ml-2" ng-model="file.text" placeholder="Label to show" ng-required="true">\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-row">\r\n                        <div class="form-group col">\r\n                            <label for="file{{$index}}">File:</label>\r\n\r\n                            <div class="form-inline">\r\n                                <input id="file{{$index}}" type="text" name="file{{$index}}" class="form-control ml-3" ng-model="file.link" placeholder="Copy URL or Add From Disk" ng-required="true">\r\n                                <file-uploader index="$index" context="file">\r\n                                    <input type="file"  class="fileUpload" accept="application/pdf,.docx,.doc" style="display:none">\r\n                                    <button type="button" class="fileSelector btn btn-sm bg-light btn-outline-dark form-control ml-3"><span class="fa fa-upload"></span></button>\r\n                                </file-uploader>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n        <a class="btn btn-info float-right p-1" ng-if="ctrl.files.length>0" type="button" ng-click="ctrl.addFile($event)">Add another</a>\r\n    </div>\r\n</ng-form>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("fileUploader",["$parse","fileService",function(e,n){return{restrict:"E",transclude:!0,scope:{index:"=",form:"=",context:"="},template:t(60),link:function(e,n,t,r){$(n).find(".fileSelector").on("click",function(e){$(n).find(".fileUpload").click()}),$(n).find(".fileUpload").change(function(){r.handleChange(this)})},controllerAs:"fup",controller:["$scope",function(e){var t=void 0,r=this;this.handleChange=function(i){this.file=i.files[0],t&&n.remove(e.context,t),t=this.file.name,e.$apply(function(){e.$emit("receiveFile",[e.index,r.file])})}}]}}])}},function(e,n){e.exports="\r\n<ng-transclude></ng-transclude>"},function(e,n,t){"use strict";e.exports=function(e){e.directive("validFile",[function(){return{restrict:"A",require:"ngModel",link:function(e,n,t,r){if(t.validFile)var i=new RegExp(t.validFile);if(t.maxSize)var a=Number(t.maxSize);n.on("change",function(){r.$setViewValue(n[0].files[0])}),r.$render=function(){},r.$setViewValue(),r.$validators.validFile=function(e,n){return!!r.$isEmpty(e)||!(e.size>1e3*a)},r.$validators.validType=function(e,n){return!!r.$isEmpty(e)||(!i||!!i.test(e.name))}}}}])}},function(e,n,t){"use strict";e.exports=function(e){e.directive("imageAdmin",["fileService",function(e){return{restrict:"E",template:t(63),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["$scope",function(n){var t=this;t.element=n.item.element,t.element.src?t.element.src.startsWith("blob")?t.currentFile=e.getFileName(t.element.src):t.currentFile=t.element.src.replace("image/",""):t.currentFile="None",n.$on("receiveFile",function(n,r){n.stopPropagation(),r[0]=t.element,t.currentFile=r[1].name,e.addFile(r),e.createUrls(r)})}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <file-uploader context="ctrl.element" form="componentSpecifics">\r\n        <input type="file"  class="fileUpload" name="fileInput" id="fileInput" ng-model="fileUp" accept="image/*" style="display:none" valid-file="(.jpg|.jpeg|.png)$" data-max-size="80">\r\n        <button type="button" class="fileSelector btn btn-success form-control"><span class="fa fa-upload mr-3"></span>Add {{ctrl.element.src ? "Another" : ""}} image</button>\r\n        <p class="small text-danger" ng-if="componentSpecifics.$error.validFile">Your file is too big ({{this.file.size}}). Maximum allowed is 80KB.</p>\r\n        <p class="small text-danger" ng-if="componentSpecifics.$error.validType">Your file has to be the an image (.jpg/.jpeg/.png)</p>\r\n    </file-uploader>\r\n    <p class="small mt-3">Current file: <span class="bg-danger text-white p-1">{{ctrl.currentFile}}</span></p>\r\n</ng-form>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("websiteLinksAdmin",[function(){return{restrict:"E",template:t(65),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["$scope",function(e){this.links=e.item.element.links,this.createLinks=function(){e.item.element.links=[{}],this.links=e.item.element.links},this.addLink=function(){this.links.push({})}}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <a class="btn btn-info float-right text-white p-1" ng-if="!ctrl.links.length" ng-click="ctrl.createLinks()">Add Link</a>\r\n    <div class="w-100">\r\n        <div class="card mb-2 link-card" collapsible-card ng-repeat="link in ctrl.links" ifs-editable="Link" callback-array="ctrl.links" ifs-editable-class="mr-4">\r\n            <div class="card-header p-1" >\r\n                <p class="form-subtitle p-0 m-0 pl-3 font-weight-bold">Link {{$index+1}}<span class="fa fa-minus float-right" style="line-height: 1.5" ></span></p>\r\n            </div>\r\n            <div class="card-body collapse">\r\n                <div class="form-group text-center">\r\n                    <label for="label{{$index}}">Display:</label>\r\n                    <input id="label{{$index}}"  name="label{{$index}}" class="form-control m-auto" ng-model="link.text" placeholder="Label to show" optional>\r\n                    <label for="myth{{$index}}">Link:</label>\r\n                    <input id="myth{{$index}}" type="url" name="myth{{$index}}" class="form-control m-auto" ng-model="link.link" placeholder="Enter URL" ng-required="true">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <a class="btn btn-info float-right text-white p-1" ng-if="ctrl.links.length>0" ng-click="ctrl.addLink()">Add another</a>\r\n    </div>\r\n</ng-form>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("listAdmin",[function(){return{restrict:"E",template:t(67),link:function(e,n,t,r){},controllerAs:"ctrl",controller:["$scope",function(e){this.items=e.item.element.list_elements,this.createItems=function(){e.item.element.list_elements=[{}],this.items=e.item.element.list_elements},this.addItem=function(){this.items.push({})}}]}}])}},function(e,n){e.exports='<ng-form name="componentSpecifics" novalidate>\r\n    <a class="btn btn-info float-right text-white p-1" ng-if="!ctrl.items.length" ng-click="ctrl.createItems()">Add List entry</a>\r\n    <div class="w-100">\r\n        <div class="card mb-2 link-card" collapsible-card ng-repeat="item in ctrl.items" ifs-editable="Link" callback-array="ctrl.items" ifs-editable-class="mr-4">\r\n            <div class="card-header p-1" >\r\n                <p class="form-subtitle p-0 m-0 pl-3 font-weight-bold">List Element {{$index+1}}<span class="fa fa-minus float-right" style="line-height: 1.5" ></span></p>\r\n            </div>\r\n            <div class="card-body collapse">\r\n\r\n                <text-paragraph-admin form-name="listElement{{$index}}" item="item"></text-paragraph-admin>\r\n\r\n            </div>\r\n        </div>\r\n        <a class="btn btn-info float-right text-white p-1" ng-if="ctrl.items.length>0" ng-click="ctrl.addItem()">Add another</a>\r\n    </div>\r\n</ng-form>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("linkPdf",["$timeout",function(e){return{restrict:"E",scope:{component:"=",compindex:"="},template:t(69),link:function(e,n,t,r){},controller:["$scope",function(n){n.addLink=function(t){n.component.hasOwnProperty("links")?(n.component.links.splice(t+1,0,{}),e(function(){var e=angular.element(document.getElementById(n.compindex+"linkField"+(t+1)));angular.element(document.getElementById("mainContent")).scrollToElement(e,80,70)},100)):n.component.links=[{}]},n.removeLink=function(e){n.component.links.splice(e,1)}}]}}])}},function(e,n){e.exports='<div class="form-group">\r\n\r\n    <label for="{{compindex+\'straightlink\'}}">Straight Link: </label>\r\n    <fieldset id="{{compindex+\'straightlink\'}}" class="my-4">\r\n        <label for="{{compindex+\'straightlinklink\'}}">Link: </label>\r\n        <input id="{{compindex+\'straightlinklink\'}}" class="form-control w-50" ng-model="component.straightlink.link">\r\n\r\n        <label for="{{compindex+\'straightlinktext\'}}">Tag: </label>\r\n        <input id="{{compindex+\'straightlinktext\'}}" class="form-control w-50" ng-model="component.straightlink.text">\r\n\r\n        <label for="{{compindex+\'straightlinktag\'}}">Tag: </label>\r\n        <input id="{{compindex+\'straightlinktag\'}}" class="form-control w-50" ng-model="component.straightlink.tag">\r\n    </fieldset>\r\n</div>\r\n<div class="form-group row">\r\n    <span   class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >Links: </span>\r\n    <div class="space col-1"></div>\r\n    <div class="col-5">\r\n        <div ng-if="!component.links ||component.links.length<=0">\r\n            <span class="fa fa-plus-circle float-left px-2" ng-click="addLink(-1)"></span>\r\n            <span>Add a Link</span>\r\n        </div>\r\n        <div class="mb-4" ng-repeat="linkField in component.links">\r\n            <pre>{{compindex+\'linkField\'+$index}}</pre>\r\n            <label for="{{compindex+\'linkField\'+$index}}" class=" w-100 d-flex">\r\n                <h6 class="mr-auto">Link {{$index+1}}:</h6>\r\n                <span class="fa fa-plus-circle float-right px-2" title="Add a link right after this one" ng-click="addLink($index)"></span>\r\n                <span class="fa fa-minus-circle float-right px-2" title="Delete this link" ng-click="removeLink($index)"></span>\r\n            </label>\r\n            <hr class="title-separator tier-two">\r\n            <fieldset id="{{compindex+\'linkField\'+$index}}">\r\n                <label for="{{\'linkhref\'+$index}}">Link: </label>\r\n                <input name="" id="{{\'linkhref\'+$index}}"  class="form-control" ng-model="linkField.link">\r\n\r\n                <label for="{{\'linktext\'+$index}}">Text: </label>\r\n                <input name="" id="{{\'linktext\'+$index}}"  class="form-control" ng-model="linkField.text">\r\n\r\n                <label for="{{\'linktag\'+$index}}">Tag: </label>\r\n                <input name="" id="{{\'linktag\'+$index}}" class="form-control" ng-model="linkField.tag">\r\n            </fieldset>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,n,t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){e.directive("linkReference",["$timeout",function(e){return{restrict:"E",scope:{component:"=",compindex:"="},template:t(71),link:function(e,n,t,r){},controller:["$scope","$filter",function(n,t){function i(e){var t=[];for(var i in e)if(e.propertyIsEnumerable(i)&&"subtitle"!==i&&"type"!==i&&"space_after"!==i&&"$$hashKey"!==i&&(t.push({key:i,type:r(e[i])}),"object"==r(e[i]))){var a=[];for(var o in e[i][0])e[i][0].propertyIsEnumerable(o)&&"$$hashKey"!==o&&a.push({key:o,type:r(e[i][0][o])});n.templates[i]=a}return t}var a={title:"Enter title here",authors:[{name:""}],year:"",publisher:"",volume:"",pages:"",link:""};n.templates={};var o=i(a);n.keys=i(n.component),n.keys.length<1&&(n.keys=o),n.fix=function(e){return t("capitalize")(t("singular")(e))},n.addElem=function(t,r){n.component.hasOwnProperty(r)?(n.component[r].splice(t+1,0,{}),e(function(){var e=angular.element(document.getElementById(n.compindex+"field"+r.toString()+(t+1)));angular.element(document.getElementById("mainContent")).scrollToElement(e,120,300)},100)):n.component[r]=[{}]},n.removeElem=function(e,t){n.component[t].splice(e,1),0==n.component[t].length&&delete n.component[t]}}]}}])}},function(e,n){e.exports='<div ng-repeat="compkey in keys">\r\n    <div class="form-group row" ng-if="compkey.type===\'string\'">\r\n        <label for="{{compindex+\'component\'}}+{{compkey.key+$index}}" class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >{{compkey.key | capitalize}}: </label>\r\n        <div class="space col-1"></div>\r\n        <input class="form-control col-5" type="text" id="{{compindex+\'component\'}}+{{compkey.key+$index}}" ng-model="component[compkey.key]">\r\n    </div>\r\n    <div class="form-group row" ng-if="compkey.type===\'object\'">\r\n        <pre>{{templates[compkey.key] | json}}</pre>\r\n        <span  class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >{{compkey.key | capitalize}}: </span>\r\n        <div class="space col-1"></div>\r\n        <div class="col-5">\r\n            <div ng-if="component[compkey.key].length<=0 || !component[compkey.key]">\r\n                <span class="fa fa-plus-circle float-left px-2" ng-click="addElem(-1,compkey.key)"></span>\r\n                <span>Add New</span>\r\n            </div>\r\n            <div class="mb-4" ng-repeat="field in component[compkey.key]">\r\n                <pre>{{compindex+\'field\'}}{{compkey.key + $index}}</pre>\r\n                <label for="{{compindex+\'field\'}}+{{compkey.key + $index}}" class=" w-100 d-flex">\r\n                    <h6 class="mr-auto" ng-bind="fix(compkey.key)+\' \'+($index+1)+\':\'"></h6>\r\n                    <span class="fa fa-plus-circle float-right px-2" title="Add a {{compkey.key | singular}} right after this one" ng-click="addElem($index,compkey.key)"></span>\r\n                    <span class="fa fa-minus-circle float-right px-2" title="Delete this link" ng-click="removeElem($index,compkey.key)"></span>\r\n                </label>\r\n                <hr class="title-separator tier-two">\r\n                <fieldset id="{{compindex+\'field\'}}{{compkey.key + $index}}">\r\n                    <div ng-repeat="subField in templates[compkey.key]">\r\n                        <div class="form-group row" ng-if="subField.type===\'string\'">\r\n                            <label for="{{compindex+\'component\'}}+{{compkey.key+$index}}" class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >{{subField.key | capitalize}}: </label>\r\n                            <div class="space col-1"></div>\r\n                            <input class="form-control col-5" type="text" id="{{compindex+\'component\'}}+{{compkey.key+$index}}" ng-model="field[subField.key]">\r\n                        </div>\r\n                    </div>\r\n\r\n                </fieldset>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.directive("linkTelephoneForm",function(){return{restrict:"E",scope:{component:"=",compindex:"="},template:t(73),link:function(e,n,t,r){},controller:["$scope",function(e){}]}})}},function(e,n){e.exports='<div class="form-group row">\r\n    <label for="{{compindex+\'componentlinktel\'+$index}}" class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >Tel Number: </label>\r\n    <div class="space col-1"></div>\r\n    <input class="form-control col-5" type="text" id="{{compindex+\'componentlinktel\'+$index}}" ng-model="component.text"></input>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("linkWebsite",["$timeout",function(e){return{restrict:"E",scope:{component:"=",compindex:"="},template:t(75),link:function(e,n,t,r){},controller:["$scope",function(n){n.addLink=function(t){n.component.hasOwnProperty("links")?(n.component.links.splice(t+1,0,{}),e(function(){var e=angular.element(document.getElementById(n.compindex+"linkField"+(t+1)));angular.element(document.getElementById("mainContent")).scrollToElement(e,80,70)},100)):n.component.links=[{}]},n.removeLink=function(e){n.component.links.splice(e,1)}}]}}])}},function(e,n){e.exports='<div class="form-group row">\r\n    <span  class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >Links: </span>\r\n    <div class="space col-1"></div>\r\n    <div class="col-5">\r\n        <div ng-if="component.links.length<=0 || !component.links">\r\n            <span class="fa fa-plus-circle float-left px-2" ng-click="addLink(-1)"></span>\r\n            <span>Add a Link</span>\r\n        </div>\r\n        <div class="mb-4" ng-repeat="linkField in component.links">\r\n            <pre>{{compindex+\'linkField\'+$index}}</pre>\r\n            <label for="{{compindex+\'linkField\'+$index}}" class=" w-100 d-flex">\r\n                <h6 class="mr-auto">Link {{$index+1}}:</h6>\r\n                <span class="fa fa-plus-circle float-right px-2" title="Add a link right after this one" ng-click="addLink($index)"></span>\r\n                <span class="fa fa-minus-circle float-right px-2" title="Delete this link" ng-click="removeLink($index)"></span>\r\n            </label>\r\n            <hr class="title-separator tier-two">\r\n            <fieldset id="{{compindex+\'linkField\'+$index}}">\r\n                <label for="{{\'linkhref\'+$index}}">Link: </label>\r\n                <input name="" id="{{\'linkhref\'+$index}}"  class="form-control" ng-model="linkField.link">\r\n\r\n                <label for="{{\'linktext\'+$index}}">Text: </label>\r\n                <input name="" id="{{\'linktext\'+$index}}"  class="form-control" ng-model="linkField.text">\r\n\r\n                <label for="{{\'linktag\'+$index}}">Tag: </label>\r\n                <input name="" id="{{\'linktag\'+$index}}" class="form-control" ng-model="linkField.tag">\r\n            </fieldset>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("listTextForm",["$timeout",function(e){return{restrict:"E",scope:{component:"=",compindex:"="},template:t(77),link:function(e,n){},controller:["$scope",function(n){n.addLinkElement=function(t,r){n.component.list_elements[r].hasOwnProperty("links")?(n.component.list_elements[r].links.splice(t+1,0,{}),e(function(){var e=angular.element(document.getElementById(n.compindex+""+r+"linkElem"+(t+1)));angular.element(document.getElementById("mainContent")).scrollToElement(e,80,50)},100)):n.component.list_elements[r].links=[{}]},n.removeLinkElement=function(e,t){n.component.list_elements[t].links.splice(e,1)},n.addListElement=function(t){n.component.hasOwnProperty("list_elements")?(n.component.list_elements.splice(t+1,0,{}),e(function(){var e=angular.element(document.getElementById(n.compindex+"listElem"+(t+1)));angular.element(document.getElementById("mainContent")).scrollToElement(e,80,50)},100)):n.component.list_elements=[{}]},n.removeListElement=function(e){n.component.list_elements.splice(e,1)}}]}}])}},function(e,n){e.exports='<div class="form-group row">\r\n    <span for="{{\'componenttext\'+$index}}" class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >List: </span>\r\n    <div class="space col-1"></div>\r\n    <div class="col-5">\r\n        <div ng-if="component[\'list_elements\'].length<=0 || !component[\'list_elements\']">\r\n            <span class="fa fa-plus-circle float-left px-2" ng-click="addListElement(-1)"></span>\r\n            <span>Add an element</span>\r\n        </div>\r\n        <div class="mb-4" ng-repeat="listElement in component[\'list_elements\']">\r\n\r\n            <label for="{{compindex+\'listElem\'+$index}}" class=" w-100 d-flex">\r\n                <h6 class="mr-auto">Element {{$index+1}}:</h6>\r\n                <span class="fa fa-plus-circle float-right px-2" title="Add an element right after this one" ng-click="addListElement($index)"></span>\r\n                <span class="fa fa-minus-circle float-right px-2" title="Delete this element" ng-click="removeListElement($index)"></span>\r\n            </label>\r\n            <hr class="title-separator tier-two">\r\n            <fieldset id="{{compindex+\'listElem\'+$index}}">\r\n                <label for="{{compindex+\'text\'+$index}}">Text: </label>\r\n                <textarea name="" id="{{compindex+\'text\'+$index}}" cols="30" rows="5" class="form-control" ng-model="listElement.text"></textarea>\r\n                <div ng-if="listElement.links.length<=0 || !listElement.links">\r\n                    <span class="fa fa-plus-circle float-left px-2" ng-click="addLinkElement(-1,$parent.$index)"></span>\r\n                    <span>Add a link</span>\r\n                </div>\r\n                \x3c!-- Links --\x3e\r\n                <div class="mb-4" ng-repeat="linkElement in listElement.links">\r\n                    <label for="{{compindex+\'\'+$parent.$index+\'linkElem\'+$index}}" class=" w-100 d-flex">\r\n                        <h6 class="mr-auto">Link {{$index+1}}:</h6>\r\n                        <span class="fa fa-plus-circle float-right px-2" title="Add a link right after this one" ng-click="addLinkElement($index,$parent.$index)"></span>\r\n                        <span class="fa fa-minus-circle float-right px-2" title="Delete this link" ng-click="removeLinkElement($index,$parent.$index)"></span>\r\n                    </label>\r\n                    <hr class="title-separator tier-three">\r\n                    <fieldset id="{{compindex+\'\'+$parent.$index+\'linkElem\'+$index}}">\r\n                        <label for="{{compindex+\'linktext\'+$index}}">Portion: </label>\r\n                        <textarea name="" id="{{compindex+\'linktext\'+$index}}" cols="30" rows="2" class="form-control" ng-model="linkElement.portion"></textarea>\r\n                        <label for="{{compindex+\'linkhref\'+$index}}">Href: </label>\r\n                        <input type="text" class="form-control" id="{{compindex+\'linkhref\'+$index}}" ng-model="linkElement.href">\r\n                    </fieldset>\r\n                </div>\r\n                \x3c!-- ------------- --\x3e\r\n            </fieldset>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("textMythfactForm",["$timeout",function(e){return{restrict:"E",scope:{component:"=",compindex:"="},template:t(79),link:function(e,n,t,r){},controller:["$scope",function(n){n.addMyth=function(t){n.component.myths?(n.component.myths.splice(t+1,0,{}),e(function(){var e=angular.element(document.getElementById(n.compindex+"mythField"+(t+1)));angular.element(document.getElementById("mainContent")).scrollToElement(e,80,70)},100)):n.component.myths=[{}]},n.removeMyth=function(e){n.component.myths.splice(e,1)}}]}}])}},function(e,n){e.exports='<div class="form-group row">\r\n    <span  class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >Myths: </span>\r\n    <div class="space col-1"></div>\r\n    <div class="col-5">\r\n        <div ng-if="component.myths.length<=0 || !component.myths">\r\n            <span class="fa fa-plus-circle float-left px-2" ng-click="addMyth(-1)"></span>\r\n            <span>Add a Myth</span>\r\n        </div>\r\n        <div class="mb-4" ng-repeat="mythField in component.myths">\r\n            <pre>{{compindex+\'mythField\'+$index}}</pre>\r\n            <label for="{{compindex+\'mythField\'+$index}}" class=" w-100 d-flex">\r\n                <h6 class="mr-auto">Myth {{$index+1}}:</h6>\r\n                <span class="fa fa-plus-circle float-right px-2" title="Add a myth right after this one" ng-click="addMyth($index)"></span>\r\n                <span class="fa fa-minus-circle float-right px-2" title="Delete this myth" ng-click="removeMyth($index)"></span>\r\n            </label>\r\n            <hr class="title-separator tier-two">\r\n            <fieldset id="{{compindex+\'mythField\'+$index}}">\r\n                <label for="{{\'myth\'+$index}}">Myth: </label>\r\n                <textarea name="" id="{{\'myth\'+$index}}" cols="30" rows="5" class="form-control" ng-model="mythField.myth"></textarea>\r\n                <label for="{{\'fact\'+$index}}">Fact: </label>\r\n                <textarea name="" id="{{\'fact\'+$index}}" cols="30" rows="5" class="form-control" ng-model="mythField.fact"></textarea>\r\n            </fieldset>\r\n        </div>\r\n    </div>\r\n\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("textQuoteForm",function(){return{restrict:"E",scope:{component:"=",compindex:"="},template:t(81),link:function(e,n,t,r){},controller:["$scope",function(e){}]}})}},function(e,n){e.exports='<div class="form-group row">\r\n    <label for="{{\'componenttext\'}}" class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >Text: </label>\r\n    <div class="space col-1"></div>\r\n    <textarea class="form-control col-5" rows="5" cols="40" type="text" id="{{\'componenttext\'}}" ng-model="component.text"></textarea>\r\n</div>\r\n<div class="form-group row">\r\n    <label for="{{compindex+\'componentauthor\'}}" class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >Author: </label>\r\n    <div class="space col-1"></div>\r\n    <input class="form-control col-5" type="text" id="{{compindex+\'componentauthor\'}}" ng-model="component.author"></input>\r\n</div>\r\n<div class="form-group row">\r\n    <label for="{{compindex+\'componentyear\'}}" class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >Year: </label>\r\n    <div class="space col-1"></div>\r\n    <input class="form-control col-5"  type="text" id="{{compindex+\'componentyear\'}}" ng-model="component.year"></input>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("appForm",["$timeout",function(e){return{restrict:"E",template:t(83),scope:{chapter:"="},link:function(n,t,r,i){var a=function(){var e=t.find(".toggles");e.off(),e.on("click",function(e){e.preventDefault(),e.stopPropagation();var n=$(e.currentTarget).siblings("select");n[0].disabled=!n[0].disabled})};n.$on("prepareFields",function(){e(function(){a()},100)})},controller:["$scope",function(n){n.selected=null,n.typeOptions=["text-paragraph","list-text","text-alert","text-mythfact","text-quote","link-telephone","link-website","link-email","link-pdf","link-reference","video-single"],n.$on("deleteSelectors",function(e){e.preventDefault(),n.componentSelected=null,n.selected=null}),n.selectThis=function(e){n.selected==e?n.selected=null:n.selected=e},n.addNewSection=function(){n.chapter.sections.push({})},n.addNewComponent=function(e){n.chapter.sections[e].hasOwnProperty("components")||(n.chapter.sections[e].components=[]),n.chapter.sections[e].components.push({}),n.$emit("prepareFields")},n.move=function(t,r,i,a){a.preventDefault(),a.stopPropagation(),e(function(){var e=r[i+t];r[i+t]=r[i],r[i]=e,n.$emit("prepareFields")},0)},n.deleteSection=function(e){n.chapter.sections.splice(e,1),n.selected=null},n.setComponentSelected=function(e,t){var r=t.toString()+e.toString();n.componentSelected===r?n.componentSelected=null:n.componentSelected=r},n.deleteComponent=function(e,t){n.chapter.sections[t].components.splice(e,1),n.componentSelected=null}}]}}])}},function(e,n){e.exports='\r\n<form ng-submit="submit()" class="mx-4 my-4" novalidate>\r\n    <div class="form-group row">\r\n        <label for="chaptername" class="col-lg-1 col-2 pl-3"><h4>Title: </h4></label>\r\n        <input class="form-control col-5" type="text" name="title" id="chaptername" ng-model="chapter.name">\r\n    </div>\r\n\r\n    <hr>\r\n\r\n    <h4 class="mt-4">Sections: </h4>\r\n    <hr class="title-underliner">\r\n\r\n    <div ng-repeat="section in chapter.sections">\r\n        \x3c!--\r\n        <pre>{{section | json}}</pre>\r\n        --\x3e\r\n        <div class="card bg-transparent">\r\n            <div class="card-header bg-secondary text-light" ng-click="selectThis($index)">\r\n                <h5 ng-show="section.subtitle" class="d-inline">{{section.subtitle}}</h5>\r\n                <h5 ng-show="!section.subtitle" class="d-inline">Edit this Section</h5>\r\n                <span class="fa fa-trash float-right btn btn-danger" ng-click="deleteSection($index)"></span>\r\n            </div>\r\n\r\n            <div class="card-body bg-transparent" ng-show="selected==$index">\r\n                <h5 class="float-left">{{$index+1}}</h5>\r\n                <div class="clearfix mb-2"></div>\r\n                <div class="form-group row">\r\n                    <label for="{{\'sectionname\'+$index}}" class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >Subtitle: </label>\r\n                    <div class="space col-1"></div>\r\n                    <input class="form-control col-5" type="text" name="title" id="{{\'sectionname\'+$index}}" ng-model="section.subtitle">\r\n                </div>\r\n                <div class="form-group row">\r\n                    <div class="space col-lg-3 col-4"></div>\r\n                    <div class="form-check pl-3">\r\n\r\n                        <input class="form-check-input" type="checkbox" ng-model="section[\'space_after\']" id="{{\'sectionspace\'+$index}}">\r\n                        <label class="form-check-label" for="{{\'sectionspace\'+$index}}">\r\n                            Draw spacer after section\r\n                        </label>\r\n                    </div>\r\n\r\n                </div>\r\n                <h4 class="mt-4">Section Components:  </h4>\r\n\r\n                <div ng-repeat="component in section.components">\r\n                    <div class="card bg-transparent" ng-class="{\'component-selected\': componentSelected==$parent.$index.toString()+$index.toString()}">\r\n                        <div class="card-header" ng-click="setComponentSelected($index,$parent.$index)" ng-class="{\'header-selected\': componentSelected==$parent.$index.toString()+$index.toString()}">\r\n                            <h5 ng-show="component.subtitle" class="d-inline">{{component.subtitle}}</h5>\r\n                            <h5 ng-show="!component.subtitle" class="d-inline">Edit this Section</h5>\r\n\r\n                            <span class="fa fa-trash float-right btn btn-danger" ng-click="deleteComponent($index,$parent.$index)"></span>\r\n                            <div class="btn-group float-right mr-3">\r\n                                <span class=" fa fa-arrow-down btn btn-light btn-outline-dark" ng-click="move(1,section.components,$index,$event)" ng-show="$index<section.components.length-1"></span>\r\n                                <span class=" btn btn-warning fa fa-arrow-up  btn-outline-dark" ng-click="move(-1,section.components,$index,$event)" ng-show="$index>0"></span>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class="card-body bg-transparent" ng-show="componentSelected==$parent.$index.toString()+$index.toString()">\r\n                            <pre>{{component | json}}</pre>\r\n                            <div class="form-group row">\r\n                                <label for="{{\'componentname\'+$index}}" class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >Title: </label>\r\n                                <div class="space col-1"></div>\r\n                                <input class="form-control col-5" type="text" name="title" id="{{\'componentname\'+$index}}" ng-model="component.subtitle">\r\n                            </div>\r\n                            <div class="form-group row">\r\n                                <div class="space col-lg-3 col-4"></div>\r\n                                <div class="form-check pl-3">\r\n\r\n                                    <input class="form-check-input" type="checkbox" ng-model="component[\'space_after\']" id="{{\'componentspace\'+$index}}">\r\n                                    <label class="form-check-label" for="{{\'componentspace\'+$index}}">\r\n                                        Draw spacer after component\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="form-group row">\r\n                                <label for="{{\'componenttype\'+$index}}" class="col-lg-2 col-3 text-right align-text-bottom" style="line-height: 2.8" >Type: </label>\r\n                                <div class="space col-1"></div>\r\n                                <select class="form-control col-5" disabled name="{{\'comptype_\'+$index}}" id="{{\'componenttype\'+$index}}" ng-model="component.type" ng-options="choice for choice in typeOptions"></select>\r\n                                <div class="space col-1"></div>\r\n                                <button class="btn btn-primary col-2 w-25 toggles" >Lock/Unlock</button>\r\n                            </div>\r\n                            <ng-include src="\'templates/forms/textparagraph.html\'" ng-if="component.type===\'text-paragraph\'"></ng-include>\r\n                            <ng-include src="\'templates/forms/textalert.html\'" ng-if="component.type===\'text-alert\'"></ng-include>\r\n\r\n                            <text-mythfact-form ng-if="component.type===\'text-mythfact\'" component="component" compindex="$parent.$parent.$index.toString() + $parent.$index.toString()"></text-mythfact-form>\r\n                            <text-quote-form ng-if="component.type===\'text-quote\'" component="component" compindex="$parent.$parent.$index.toString() + $parent.$index.toString()"></text-quote-form>\r\n                            <list-text-form ng-if="component.type===\'list-text\'" component="component" compindex="$parent.$parent.$index.toString() + $parent.$index.toString()"></list-text-form>\r\n                            <link-telephone-form ng-if="component.type===\'link-telephone\'" component="component" compindex="$parent.$parent.$index.toString() + $parent.$index.toString()"></link-telephone-form>\r\n                            <link-website ng-if="component.type===\'link-website\' || component.type===\'link-email\'" component="component" compindex="$parent.$parent.$index.toString() + $parent.$index.toString()"></link-website>\r\n                            <link-pdf ng-if="component.type===\'link-pdf\'" component="component" compindex="$parent.$parent.$index.toString() + $parent.$index.toString()"></link-pdf>\r\n                            <link-reference ng-if="component.type===\'link-reference\'" component="component" compindex="$parent.$parent.$index.toString() + $parent.$index.toString()"></link-reference>\r\n\r\n                            <hr>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <button class="btn btn-success my-3 float-right" ng-click="addNewComponent($index)">\r\n                    <span class="fa fa-plus mr-3"></span>\r\n                    Add new Component\r\n                </button>\r\n\r\n\r\n            </div>\r\n        </div>\r\n        <hr class="mb-4">\r\n    </div>\r\n    <button class="btn btn-success" ng-click="addNewSection()">\r\n        <span class="fa fa-plus mr-3"></span>\r\n        Add new Section\r\n    </button>\r\n\r\n</form>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("chapterSummary",function(){return{restrict:"E",scope:{},template:t(1),link:function(e,n,t,r){},controller:["$scope","navigate","$location","$timeout",function(e,n,t,r){e.titles=[],e.$on("dataWasLoaded",function(n,t){var r=t;if(e.titles=[],r)if(r.hasOwnProperty("introcontent")){var i=!0,a=!1,o=void 0;try{for(var l,s=r.introcontent[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;e.titles.push(c.title)}}catch(e){a=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw o}}}else{var d=!0,p=!1,m=void 0;try{for(var u,f=r.sections[Symbol.iterator]();!(d=(u=f.next()).done);d=!0){var h=u.value;e.titles.push(h.subtitle)}}catch(e){p=!0,m=e}finally{try{!d&&f.return&&f.return()}finally{if(p)throw m}}}}),e.scrollTo=function(n){var t=n.replace(/\s/g,"").toLowerCase();e.$emit("ifsPrepareScroll",[t])}}]}})}},function(e,n,t){"use strict";e.exports=function(e){e.directive("fontSizeSelector",function(){return{restrict:"E",scope:{},template:t(86),link:function(e,n,t){var r=$(n).find(".btn"),i=$("html");r.on("click",function(e){e.stopPropagation(),e.preventDefault();var n=$(e.currentTarget).find(".font-sizer").text(),t=Number(i.css("font-size").substring(0,2));"+"===n&&t<25?(t++,i.css("font-size",t+"px"),t>18&&r.css("width","+=2")):"-"===n&&t>10&&(i.css("font-size",t-1+"px"),t>18&&r.css("width","-=2"))})},controller:["$scope",function(e){}]}})}},function(e,n){e.exports='<div class="btn-toolbar" role="toolbar" aria-label="Buttons to select font size">\r\n    <div class="btn-group mx-2 " role="group" aria-label="Increase or Decrease Font">\r\n        <button   class="btn btn-fonts" aria-label="Increase Font">\r\n            <span class="fa fa-font" aria-hidden="true"></span>\r\n            <span class="font-sizer">+</span>\r\n        </button>\r\n        <button   class="btn btn-fonts" aria-label="Decrease Font">\r\n            <span class="fa fa-font" aria-hidden="true"></span>\r\n            <span class="font-sizer">-</span>\r\n        </button>\r\n    </div>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("ifsEditable",["$timeout","$parse","$compile",function(e,n,t){return{restrict:"A",link:function(r,i,a,o,l){var s=n(a.callbackArray)(r),c=a.ifsEditableClass||"",d=angular.element('<div class="btn-group btn-group-sm '+c+' " role="group">\n  <button type="button" class="btn btn-info small py-0 px-1" ng-hide="$first" ng-click="sendUpMessage($event)" ><span class="fa fa-arrow-up"></span></button>\n  <button type="button" class="btn btn-info small py-0 px-1" ng-hide="$last" ng-click="sendDownMessage($event)"><span class="fa fa-arrow-down"></span></button>\n  <button type="button" class="btn btn-danger small py-0 px-1" ng-click="sendDeleteMessage($event)"><span class="fa fa-trash"></span></button>\n</div>');d.css({position:"absolute",top:"0.4rem",right:"0","z-index":"100",opacity:"0.3","font-size":"5px"}),d.hover(function(){d.css("opacity","0.95")},function(){d.css("opacity","0.3")}),r.message=a.ifsEditable;var d=t(d)(r);e(function(){i.addClass("position-relative"),i.append(d)},0),r.sendUpMessage=function(e){e.stopPropagation(),r.$emit("move",{message:r.message,index:r.$index,parentIndex:r.$parent.$index,direction:"up",array:s})},r.sendDownMessage=function(e){e.stopPropagation(),r.$emit("move",{message:r.message,index:r.$index,parentIndex:r.$parent.$index,direction:"down",array:s})},r.sendDeleteMessage=function(e){e.stopPropagation(),r.$emit("deleteFromArray",{message:r.message,index:r.$index,parentIndex:r.$parent.$index,array:s})}},controller:["$scope",function(e){}]}}])}},function(e,n,t){"use strict";e.exports=function(e){e.directive("ifsExtendable",["$compile","$timeout","$parse",function(e,n,t){return{restrict:"A",link:function(r,i,a,o){var l=t(a.ifsExtendableCallback),s=a.classes||"",c=a.ifsExtendableTitle,d=angular.element('<li class="list-group-item p-0">\n                        <button class="btn w-100 btn-sm '+s+'">\n                            <span class="fa fa-plus-circle fa-fw text-white float-left"></span>\n                            <span> '+c+"</span>\n                        </button>\n                    </li>"),d=e(d)(r);n(function(){i.append(d),$(d).on("click",function(){r.$apply(function(){l(r)})})},0)},controller:["$scope",function(e){}]}}])}},function(e,n,t){"use strict";e.exports=function(e){e.directive("ifsVideo",["$window","$timeout",function(e,n){return{restrict:"E",template:t(90),scope:{element:"=",start:"="},link:function(e,t){e.$on("stopVideo",function(n,t){if(n.preventDefault(),e.videoPlaying){var r=$(e.iframe).attr("src");$(e.iframe).attr("src",r),e.$apply(function(){e.videoPlaying=!1})}}),e.setFrameParams=function(){n(function(){e.iframe=$(t).find("iframe");var n=$(window).width();n>930?(e.iframe.css("width","600px"),e.iframe.css("height","335px")):n<=930&&(e.iframe.css("width","390px"),e.iframe.css("height","218px")),$(window).resize(function(n){var t=$(this).width();t>930?(e.iframe.css("width","600px"),e.iframe.css("height","335px")):t<=930&&(e.iframe.css("width","390px"),e.iframe.css("height","218px"))})})}},controller:["$scope","$sce",function(e,t){e.element.video&&(e.link=t.trustAsResourceUrl(e.element.video.src)),e.videoPlaying=!1,e.openVideo=function(){e.videoPlaying=!e.videoPlaying,e.videoPlaying&&e.setFrameParams()},e.start&&n(function(){e.openVideo()},0)}]}}])}},function(e,n){e.exports='\r\n<div class="video-player d-flex align-items-center justify-content-between flex-column mt-4">\r\n    <h5 ng-show="element.subtitle">{{element.subtitle}}</h5>\r\n    <img src="{{element.video.thumb}}" alt="{{element.subtitle}}" title="{{element.subtitle}}" width="200" height="113" class="img-fluid d-block" ng-show="!videoPlaying">\r\n    <button class="btn play-video" ng-click="openVideo($event)">\r\n        <span class="fa fa-play mr-2" ng-show="!videoPlaying"></span>\r\n        {{videoPlaying ? "Hide Video" : "Play Video"}}\r\n    </button>\r\n\r\n    <iframe type="text/html"\r\n            ng-src="{{link}}"\r\n            frameborder="0"\r\n            scrolling="no"\r\n            autoplay="false"\r\n            ng-if="videoPlaying"\r\n            allowfullscreen>\r\n    </iframe>\r\n\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("linkEmail",function(){return{restrict:"E",scope:{component:"="},template:t(92),controller:["$scope",function(e){}]}})}},function(e,n){e.exports='<div class="card card-inner">\r\n    <div class="card-body py-2">\r\n        <div class="card-subtitle">\r\n            {{component.subtitle || "E-mail:"}}\r\n        </div>\r\n        <div class="card-text">\r\n            <div ng-repeat="mail in component.links">\r\n                <span class="email-tag mr-4" ng-show="mail.tag">{{mail.tag}}: </span>\r\n                <span class="fa fa-envelope"></span>\r\n                <a href="{{mail.link}}" title="Mail to: {{mail.text}}">{{mail.text}}</a>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("linkTelephone",function(){return{restrict:"E",scope:{component:"="},template:t(94),controlller:function(e){}}})}},function(e,n){e.exports='<div class="card card-inner">\r\n    <div class="card-body py-2">\r\n        <div class="card-subtitle">\r\n            {{component.subtitle || "Telephone:"}}\r\n        </div>\r\n        <div class="card-text">\r\n            <span class="fa fa-phone"></span>\r\n            {{component.text}}\r\n        </div>\r\n    </div>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("listText",["$timeout",function(e){return{restrict:"E",scope:{element:"="},template:t(96),link:function(n,t,r,i){n.applyLinks=function(){e(function(){for(var e=0;e<n.element.list_elements.length;e++){var r=n.element.list_elements[e];if(r.links)for(var i=0;i<r.links.length;i++)if(!(r.links[i].portion.length<3)){var a=r.text.replace(r.links[i].portion,"<span class='fa fa-globe'></span><a href='"+r.links[i].href+"' class='list-link' target='_blank'>"+r.links[i].portion+"</a>");$(t).find("#"+i).html(a)}}})},n.element.hasOwnProperty("list-elements")&&n.applyLinks()},controller:["$scope","$timeout",function(e,n){}]}}])}},function(e,n){e.exports='<h5 ng-show="component.subtitle">{{component.subtitle}}</h5>\r\n<ul ng-cloak>\r\n    <li class="learning-outcome" id={{$index}} ng-repeat="elem in component[\'list_elements\']">\r\n        <text-paragraph component="elem"></text-paragraph>\r\n\r\n    </li>\r\n</ul>\r\n\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.directive("navMenu",function(){return{restrict:"E",template:t(98),link:function(e,n,t,r){},controller:["$scope","navigate","$location","$routeParams","$filter",function(e,n,t,r,i){var a=r.group;e.$watch(function(){return n.getGroup()},function(t,r){t&&"undefined"!=t&&(e.data=n.getData(),e.realData=angular.copy(e.data))}),e.select=function(r,o){o.preventDefault(),o.stopPropagation();var l=i("nospaces")($(o.target).text(),"-");t.path()!=="/content/"+a+"/blocks/"+l&&n.goTo(l,i("nospaces")(e.data[r].chapters[0].name),"-")},e.selectChapter=function(n,r,a){a.preventDefault(),a.stopPropagation();var o=i("nospaces")($(a.target).text(),"-");if(e.chSelected.lastIndexOf("-")===e.chSelected.length-1){var l=t.path();t.url(l+"/chapter/"+i("nospaces")(o,"-"))}else if(e.chSelected.indexOf(o)<=0){var l=t.path().slice(0,t.path().lastIndexOf("/")+1);t.url(l+i("nospaces")(o,"-"))}},e.$watch(function(){return t.path()},function(n){var r=n.slice(t.path().indexOf("/blocks")),a=r.split("/"),o=a.indexOf("blocks"),l=a.indexOf("chapter");o>-1?(e.selected=i("tospaces")(a[o+1],"-"),e.chSelected=e.selected+"-",l>-1&&(e.chSelected+=i("tospaces")(a[l+1],"-"))):(e.selected="",e.chSelected="")})}]}})}},function(e,n){e.exports='<nav class="navbar-nav navbar-light navbar-expand-md main-navigation" >\r\n    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#rsSidebar" aria-controls="rsSidebar" aria-expanded="false" aria-label="Toggle navigation">\r\n        <span class="navbar-toggler-icon"></span>\r\n    </button>\r\n    <div class="navbar-collapse collapse" id="rsSidebar">\r\n        <ul class="nav rs-sidebar flex-column flex-nowrap">\r\n            <li class="nav-item" ng-repeat="block in data" ng-class="{active: selected===block.name}" >\r\n                <a href="" class="nav-link block-link small " ng-click="select($index,$event)">{{block.name}}</a>\r\n                <ul class=" nav rs-sub flex-column flex-nowrap" ng-show="selected===block.name">\r\n                    <li class="nav-item" ng-repeat="chapter in block.chapters" ng-class="{\'sub-active\':chSelected === (block.name+\'-\'+chapter.name)}"  ng-click="selectChapter(block.name,chapter.name,$event)">\r\n                        <a href="" class="nav-link chapter-link h-100 small"  ng-click="selectChapter($parent.$index,$index,$event)">{{chapter.name}}</a>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</nav>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("quizCarousel",function(){return{restrict:"E",scope:{questions:"="},template:t(100),link:function(e,n,t,r){e.progress=$(n).find(".progress-div"),e.carousel=$(n).find("#quiz-carousel"),e.row=$(n).find(".row"),$(e.carousel).on("slide.bs.carousel",function(n){$(".carousel-item").eq(n.to).css("visibility","hidden"),e.current=n.to-1}),$(e.carousel).on("slid.bs.carousel",function(e){$(".carousel-item").eq(e.to).slideDown(300,function(){$(this).css("visibility","visible")})}),e.advanceProgress=function(n,t){var r=$(e.row).children(".progress-cell").eq(t);n?($(r).addClass("correct"),e.correctAnswers++,e.score=Math.floor(100*e.correctAnswers/e.questions.length)):$(r).addClass("wrong")}},controller:["$scope","$route","$location","$routeParams","$timeout",function(e,n,t,r,i){e.correctAnswers=0,e.score=0,e.results=[],e.nextSlide=function(){$(e.carousel).carousel("next")},e.isCorrect=function(n,t){var r={text:e.questions[t].text,answer:e.questions[t].answers[n].text,tip:e.questions[t].tip};e.questions[t].answers[n].id===e.questions[t].correct_answer?(e.advanceProgress(!0,t),r.correct=!0):(e.advanceProgress(!1,t),r.correct=!1),e.results.push(r),t===e.questions.length-1&&i(function(){e.quizFinished=!0},1e3),$(e.carousel).carousel("next")},e.reloadQuiz=function(){n.reload()}}]}})}},function(e,n){e.exports='\r\n<div class="progress-div align-self-center ml-2 mb-3 ">\r\n    <div class="row">\r\n        <div class="progress-text text-center" ng-show="current>=0">\r\n            {{current}} of {{questions.length}}\r\n        </div>\r\n        <div class="col progress-cell" ng-repeat="q in questions" >\r\n        </div>\r\n    </div>\r\n</div>\r\n<div id="quiz-carousel" class="carousel slide quiz " data-interval="false" data-keyboard="false">\r\n    <div class="carousel-inner">\r\n        <div class="carousel-item active  ">\r\n            <div class="first-page d-flex  justify-content-center align-items-center h-100">\r\n                <button class="btn quiz-control quiz-start w-50 "  ng-click="nextSlide()">Start Quiz</button>\r\n            </div>\r\n        </div>\r\n        <div class="carousel-item" ng-repeat="q in questions">\r\n            <div class="question-format d-flex align-content-around justify-content-between flex-wrap flex-column h-100">\r\n                <p class="question-text">Q{{$index+1}}: {{q.text}}</p>\r\n                <div class="d-flex align-content-center justify-content-around ">\r\n                    <a href="" class="btn answer-option" ng-repeat="a in q.answers" ng-click="isCorrect($index,$parent.$index)">{{a.text}}</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="carousel-item">\r\n            <div class="last-page d-flex justify-content-between align-items-center h-100 flex-column">\r\n                <p>Congratulations! You scored <span class="score">{{score}}</span> % !!!</p>\r\n                <button class="btn quiz-control" ng-click="reloadQuiz()">Restart Quiz</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="quiz-results" ng-show="quizFinished">\r\n    <ul class="list-group my-3">\r\n        <li class="list-group-item results">\r\n            <h2>Results</h2>\r\n        </li>\r\n        <li class="list-group-item result-item d-flex flex-column justify-content-between align-items-start" ng-repeat="r in results">\r\n            <p class="question-text">{{r.text}}</p>\r\n            <div class="question-answer">\r\n                <p ng-class="{\'ans-correct\':r.correct,\'ans-incorrect\': !r.correct}">\r\n                    You answered {{r.answer}}\r\n                    <i class="fa fa-check-circle text-success float-right ml-4 fa-2x" ng-show="r.correct"></i>\r\n                    <i class="fa fa-times-circle text-danger float-right ml-4 fa-2x" ng-show="!r.correct"></i>\r\n                </p>\r\n\r\n            </div>\r\n            <div class="card card-inner" ng-show="r.tip">\r\n                <div class="card-body py-2">\r\n                    <div class="card-subtitle">\r\n                        Tip:\r\n                    </div>\r\n                </div>\r\n                <div class="card-text">\r\n                    <p class="question-tip px-3">{{r.tip}}</p>\r\n                </div>\r\n            </div>\r\n        </li>\r\n        <li class="list-group-item results d-flex align-items-center justify-content-center ">\r\n            <button class="btn quiz-control" ng-click="reloadQuiz()">Restart Quiz</button>\r\n        </li>\r\n    </ul>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("textQuote",function(){return{restrict:"E",scope:{component:"="},template:t(102),controller:["$scope",function(e){}]}})}},function(e,n){e.exports='<h5 ng-show="component.subtitle">{{component.subtitle}}</h5>\r\n<div class="card card-inner mb-5">\r\n    <div class="card-body py-2">\r\n        <blockquote class="blockquote text-center my-5">\r\n            <p class="mb-0">"{{component.text}}"</p>\r\n            <div class="blockquote-footer" ng-show="component.author || component.year">\r\n                <cite title="Author and Year">\r\n                    {{component.author}} {{component.year}}\r\n                </cite>\r\n            </div>\r\n        </blockquote>\r\n    </div>\r\n</div>\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.directive("themeSelector",function(){return{restrict:"E",template:t(104),scope:{},link:function(e,n,t){var r,i=$("<link>",{rel:"stylesheet",type:"text/css",href:""});i.on("load",function(e){r.remove()}),$(n).find("button[data-theme]").on("click",function(n){e.$emit("changeFont",$(n.currentTarget).attr("data-theme")),n.stopPropagation(),n.preventDefault();var t="assets/css/all-"+$(n.currentTarget).attr("data-theme")+".css";i.attr("href",t),r=$("link[href*=assets]"),1==r.length&&r.attr("href")!=t&&r.after(i[0])})},controller:["$scope",function(e){}]}})}},function(e,n){e.exports='<div class="btn-toolbar" role="toolbar" aria-label="Buttons to select display options">\r\n    <div class="btn-group mx-2" role="group" aria-label="Select Theme">\r\n        <button id="default-theme" data-theme="default" class="btn btn-primary btn-default"><span class="fa fa-font" aria-hidden="true"></span></button>\r\n        <button id="ocean-theme" data-theme="ocean" class="btn btn-primary btn-ocean"><span class="fa fa-font" aria-hidden="true"></span></button>\r\n        <button id="robust-theme" data-theme="robust" class="btn btn-primary btn-robust"><span class="fa fa-font" aria-hidden="true"></span></button>\r\n    </div>\r\n</div>\r\n'},function(e,n,t){"use strict";e.exports=function(e){e.directive("thoughtBubble",function(){return{restrict:"E",scope:{component:"="},template:t(106),controller:["$scope",function(e){}]}})}},function(e,n){e.exports='<div class="thought w-75 mx-auto">\r\n    <p class="thought-title">\r\n        <span class="fa fa-lightbulb-o"></span>\r\n        Think about it!\r\n        <span class="fa fa-lightbulb-o"></span>\r\n    </p>\r\n    <text-paragraph component="component"></text-paragraph>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("topBar",function(){return{restrict:"E",scope:{},template:t(108),link:function(e,n,t,r){},controller:["$scope","$location","$routeParams",function(e,n,t){var r=/content\/([a-zA-Z]+)/g,i=n.path().split("/"),a=i.indexOf("content");a>-1&&(e.source=i[a+1].charAt(0).toUpperCase()+i[a+1].slice(1)),e.$on("$locationChangeSuccess",function(n,t){var i=r.exec(t);i&&i.length>1?i[1]!==e.source&&(e.source=i[1].charAt(0).toUpperCase()+i[1].slice(1)):t.includes("content")||(e.source="")})}]}})}},function(e,n){e.exports='<header class="container-fluid top-bar ">\r\n\r\n    <nav class="navbar nav-themed navbar-expand flex-column flex-md-row py-0">\r\n        <a class="navbar-brand py-0" href="#">\r\n            IFS\r\n            <span class="navbar-text" ng-show="source">{{source}}...</span>\r\n        </a>\r\n        <ul class="navbar-nav mr-md-auto text-center mt-1 mt-lg-0 justify-content-around" style="flex:1">\r\n            <li class="nav-item active">\r\n                <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>\r\n            </li>\r\n            <li class="nav-item">\r\n                <a class="nav-link " href="/test">Test</a>\r\n            </li>\r\n            <li class="nav-item">\r\n                <a class="nav-link  " href="/admin">AdminInterface</a>\r\n            </li>\r\n            <li class="nav-item">\r\n                <a class="nav-link" href="">Test</a>\r\n            </li>\r\n        </ul>\r\n        <theme-selector></theme-selector>\r\n        <font-size-selector></font-size-selector>\r\n    </nav>\r\n</header>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("videoCarousel",function(){return{restrict:"E",scope:{component:"=",compkey:"="},template:t(110),link:{pre:function(e,n){e.carousel=$(n).find(".carousel").carousel({interval:!1}),e.$emit("initialized")}},controller:["$scope",function(e){e.selected=0,e.vSelected=0,e.$on("initialized",function(n){n.preventDefault(),n.stopPropagation(),$(e.carousel).on("slide.bs.carousel",function(n){e.$apply(function(){e.vSelected=n.to})}),$(e.carousel).on("slid.bs.carousel",function(n){e.$broadcast("stopVideo"),e.$apply(function(){e.selected=n.to})})})}]}})}},function(e,n){e.exports='<h4 class="text-center mb-5">{{component.subtitle}}</h4>\r\n<div id="{{compkey+\'videocarousel\'}}" class="carousel slide" data-ride="carousel">\r\n    <div class="d-flex align-items-center justify-content-around w-100 ">\r\n        <a  class="my-carousel-control  d-md-inline d-none" data-target="#{{compkey+\'videocarousel\'}}" role="button" data-slide="prev">\r\n            <span class="fa fa-arrow-left mr-2 "></span>\r\n            <span class="sr-only">Previous</span>\r\n        </a>\r\n        <div class=" w-100 btn-group flex-md-nowrap flex-wrap d-flex align-content-stretch justify-content-start btn-video-carousel-group" role="group">\r\n            <button type="button" class="btn btn-video-carousel px-1" ng-repeat="video in component.videos" ng-class="{active: vSelected===$index}"\r\n                    data-slide-to="{{$index}}" data-target="#{{compkey+\'videocarousel\'}}" ng-style="{\'flex-grow\': 1}">\r\n                <span class="small">{{video.subtitle}}</span>\r\n                <span class="ifs-tooltip px-2" ng-if="component.videos.length>3">{{video.subtitle}}</span>\r\n            </button>\r\n        \x3c!-- TODO: Fix the buttons when window width < 940. They should somehow wrap the text to have more space --\x3e\r\n        </div>\r\n        <a  class="my-carousel-control d-md-inline d-none" data-target="#{{compkey+\'videocarousel\'}}" role="button" data-slide="next">\r\n            <span class="fa fa-arrow-right ml-2"></span>\r\n            <span class="sr-only">Next</span>\r\n        </a>\r\n    </div>\r\n\r\n    <div class="carousel-inner">\r\n        <div class="carousel-item" ng-class="{active: selected===$index}" ng-repeat="video in component.videos">\r\n            <ifs-video element="video"></ifs-video>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,n,t){"use strict";e.exports=function(e){e.directive("matchText",function(){return{restrict:"E",scope:{match:"="},template:t(112),link:function(e,n,t){var r=0;e.match.indices.forEach(function(n){var t=e.match.value.substr(n[0]+r,n[1]-n[0]+1);e.match.value=e.match.value.replace(t,"<span class='' style='color:green'>"+t+"</span>"),r+=42}),$(n).find("p").html(e.match.value)}}})}},function(e,n){e.exports='<p class="text-muted" style="font-size: 1rem;color:#5D6369"></p>'}]);